<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitronixs - Soluciones de Ingeniería, Automatización y Programación</title>
    <meta name="description" content="Mitronixs - Especialistas en ingeniería, automatización industrial, robótica, sistemas electrónicos de control, cómputo industrial y programación avanzada en Guadalajara, Jalisco.">
    <meta name="keywords" content="ingeniería, automatización industrial, robótica, sistemas electrónicos de control, cómputo industrial, programación, machine learning, Guadalajara">
    <meta name="author" content="Mitronixs">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Mitronixs - Soluciones de Ingeniería, Automatización y Programación Avanzada">
    <meta property="og:description" content="Expertos en automatización industrial, robótica, sistemas electrónicos de control, cómputo industrial, desarrollo web y machine learning">
    <meta property="og:image" content="https://images.unsplash.com/photo-1614624532983-4ce03382d63d?q=80&w=465&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
    
    <!-- Preconexión para mejor rendimiento -->
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Preload de imágenes críticas -->
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1350">
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1350">
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1350">
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=1350">
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1652145595413-0a79398e5888?w=500&auto=format&fit=crop&q=60">
    
    <!-- Favicon -->
    <link rel="icon" href="https://img.icons8.com/color/96/000000/robot.png" type="image/x-icon">
    
    <!-- Schema.org markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Mitronixs",
        "description": "Especialistas en ingeniería, automatización industrial, robótica, cómputo industrial y programación avanzada",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Guadalajara",
            "addressRegion": "Jalisco",
            "addressCountry": "MX"
        },
        "telephone": "+52-81-4570-6036",
        "url": "https://mitronixs.github.io",
        "priceRange": "$$$",
        "areaServed": "México"
    }
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- jsPDF para generar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- html2canvas para capturar pantalla -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Purify.js para sanitización -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.5/purify.min.js"></script>
    
    <style>
        /* ESTILOS ORIGINALES COMPLETOS (igual que antes) */
        :root {
            --primary-color: #091827;
            --secondary-color: #1a365d;
            --accent-color: #3cba54;
            --accent-light: #5cdb74;
            --dark-color: #1a202c;
            --light-color: #f8f9fa;
            --gradient: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        body.panel-open {
            overflow: hidden;
        }
        
        /* Scroll suave */
        html {
            scroll-behavior: smooth;
        }
        
        /* Header Styles */
        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            position: relative;
            margin-bottom: 0.3rem;
            padding: 0 20px;
        }
        
        .brand-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex: 1;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            flex: 1;
        }

        .company-name {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 2.2rem;
            font-weight: 800;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            position: relative;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
        }

        .company-name::before {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--accent-light);
            transition: width 0.5s ease;
        }

        .company-name:hover::before {
            width: 100%;
        }

        .company-name .tech {
            color: var(--accent-light);
            font-weight: 700;
            position: relative;
        }

        .automation-logo {
            position: relative;
            width: 60px;
            height: 60px;
            filter: drop-shadow(0 5px 15px rgba(26, 54, 93, 0.2));
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: logoFloat 6s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .automation-logo:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 8px 25px rgba(26, 54, 93, 0.3));
        }

        .logo-base {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f1f3f4 100%);
            border-radius: 50%;
            border: 2px solid #e9ecef;
            box-shadow: 
                inset 0 2px 10px rgba(255,255,255,0.8),
                0 8px 32px rgba(9, 24, 39, 0.1);
        }

        .connection-ring {
            position: absolute;
            width: 90%;
            height: 90%;
            top: 5%;
            left: 5%;
            border: 2px dashed #3cba54;
            border-radius: 50%;
            animation: rotate 20s linear infinite;
            opacity: 0.6;
        }

        .control-node {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #1a365d 0%, #091827 100%);
            border-radius: 50%;
            border: 2px solid #3cba54;
            box-shadow: 
                0 4px 15px rgba(9, 24, 39, 0.2),
                inset 0 2px 5px rgba(255,255,255,0.1);
            animation: nodePulse 4s ease-in-out infinite;
        }

        .control-node::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 7px;
            height: 7px;
            background: #3cba54;
            border-radius: 50%;
            animation: corePulse 2s ease-in-out infinite;
        }

        .robotic-arm {
            position: absolute;
            background: linear-gradient(90deg, #1a365d, #3cba54, #1a365d);
            border-radius: 8px;
            transform-origin: center;
            transition: all 0.3s ease;
        }

        .arm-segment-1 {
            width: 25px;
            height: 3px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(0deg);
            animation: armSwing 6s ease-in-out infinite;
        }

        .arm-segment-2 {
            width: 20px;
            height: 2.5px;
            top: 50%;
            left: calc(50% + 22px);
            transform: translateY(-50%) rotate(45deg);
            animation: armFlex 4s ease-in-out infinite;
            background: linear-gradient(90deg, #3cba54, #5cdb74, #3cba54);
        }

        .arm-segment-3 {
            width: 15px;
            height: 2.5px;
            top: 50%;
            left: calc(50% + 37px);
            transform: translateY(-50%) rotate(-30deg);
            animation: armGrip 3s ease-in-out infinite;
            background: linear-gradient(90deg, #5cdb74, #3cba54);
            border-radius: 6px;
        }

        .iot-node {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #3cba54;
            border-radius: 50%;
            animation: nodeGlow 3s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(60, 186, 84, 0.5);
        }

        .node-1 { top: 25%; left: 25%; animation-delay: 0s; }
        .node-2 { top: 25%; right: 25%; animation-delay: 0.5s; }
        .node-3 { bottom: 25%; left: 25%; animation-delay: 1s; }
        .node-4 { bottom: 25%; right: 25%; animation-delay: 1.5s; }
        .node-5 { top: 15%; left: 50%; transform: translateX(-50%); animation-delay: 2s; }
        .node-6 { bottom: 15%; left: 50%; transform: translateX(-50%); animation-delay: 2.5s; }

        .data-flow {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .flow-line {
            position: absolute;
            width: 1px;
            height: 25px;
            background: linear-gradient(to bottom, transparent, #3cba54, transparent);
            animation: dataFlow 4s linear infinite;
            opacity: 0;
        }

        .flow-1 { left: 30%; top: -12px; animation-delay: 0s; }
        .flow-2 { left: 50%; top: -12px; animation-delay: 1s; }
        .flow-3 { left: 70%; top: -12px; animation-delay: 2s; }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes nodePulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        @keyframes corePulse {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1);
                background: #3cba54;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.3);
                background: #5cdb74;
            }
        }

        @keyframes armSwing {
            0%, 100% { transform: translate(-50%, -50%) rotate(-20deg); }
            50% { transform: translate(-50%, -50%) rotate(20deg); }
        }

        @keyframes armFlex {
            0%, 100% { transform: translateY(-50%) rotate(40deg); }
            50% { transform: translateY(-50%) rotate(60deg); }
        }

        @keyframes armGrip {
            0%, 100% { transform: translateY(-50%) rotate(-25deg) scaleX(1); }
            50% { transform: translateY(-50%) rotate(-35deg) scaleX(0.8); }
        }

        @keyframes nodeGlow {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        @keyframes dataFlow {
            0% { transform: translateY(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(75px); opacity: 0; }
        }

        .header-controls {
            display: flex;
            gap: 8px;
            flex: 1;
            justify-content: flex-end;
        }
        
        .language-toggle, .cart-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }
        
        .language-toggle:hover, .cart-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .cart-count {
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            margin-left: 5px;
        }

        .slogan-container {
            position: relative;
            height: 25px;
            margin-top: 2px;
            overflow: hidden;
            width: 100%;
        }

        .slogan {
            position: absolute;
            width: 100%;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 300;
            letter-spacing: 0.5px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.3;
            color: var(--accent-light);
        }

        .slogan.active {
            opacity: 1;
            transform: translateY(0);
        }

        header {
            background: var(--gradient);
            color: white;
            padding: 0.3rem;
            text-align: center;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        nav {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.2rem;
            border-radius: 6px;
            margin: 0 auto;
            max-width: 800px;
            width: 100%;
        }
        
        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
        }
        
        nav ul li {
            margin: 0 8px;
            position: relative;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 3px 6px;
            border-radius: 5px;
            font-size: 0.8rem;
            position: relative;
        }
        
        nav ul li a:hover,
        nav ul li a.active {
            color: var(--accent-light);
            background: rgba(255, 255, 255, 0.1);
        }
        
        nav ul li a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 5px;
            height: 5px;
            background: var(--accent-light);
            border-radius: 50%;
        }

        /* Submenús para el diagnosticador */
        .submenu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .submenu-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .submenu-card:hover {
            background: var(--accent-light);
            color: white;
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .submenu-card i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .submenu-card h4 {
            margin-bottom: 10px;
        }
        
        .submenu-card p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Mejoras para imágenes */
        .service-img {
            height: 200px;
            overflow: hidden;
            position: relative;
            background-color: #f8f9fa;
        }
        
        .service-img.loaded {
            background: none;
        }
        
        .service-img::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                        #f0f0f0 25%, 
                        #e0e0e0 50%, 
                        #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            z-index: 1;
        }
        
        .service-img.loaded::before {
            display: none;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .service-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            opacity: 0;
            position: relative;
            z-index: 2;
        }
        
        .service-img img.loaded {
            opacity: 1;
        }
        
        .service-card:hover .service-img img {
            transform: scale(1.1);
        }
        
        .service-img::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 3;
        }
        
        .service-card:hover .service-img::after {
            opacity: 1;
        }

        /* Efectos mejorados para tarjetas de servicio */
        .service-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            position: relative;
        }
        
        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }
        
        .service-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                        transparent, 
                        rgba(255,255,255,0.2), 
                        transparent);
            transition: left 0.7s ease;
        }
        
        .service-card:hover::after {
            left: 100%;
        }
        
        .service-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        /* Cuadros informativos para chatbot y WhatsApp */
        .info-panel {
            position: fixed;
            bottom: 160px;
            right: 25px;
            width: 300px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1004;
            display: none;
            padding: 1.5rem;
            animation: fadeInUp 0.3s ease;
        }
        
        .info-panel.active {
            display: block;
        }
        
        .info-panel.whatsapp-panel {
            bottom: 160px;
            left: 25px;
            right: auto;
        }
        
        .info-panel-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .info-panel-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .chatbot-icon {
            background: var(--gradient);
            color: white;
        }
        
        .whatsapp-icon {
            background: #25D366;
            color: white;
        }
        
        .info-panel h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        .info-panel p {
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #666;
        }
        
        .info-panel-buttons {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }
        
        .info-panel-btn {
            flex: 1;
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .info-panel-btn.primary {
            background: var(--accent-color);
            color: white;
        }
        
        .info-panel-btn.secondary {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .info-panel-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .info-panel-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #999;
        }

        .chatbot-widget {
            position: fixed;
            bottom: 100px;
            right: 25px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1003;
            display: none;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .chatbot-header {
            background: var(--gradient);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chatbot-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #f8f9fa;
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background: var(--accent-color);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            background: white;
            border: 1px solid #ddd;
            border-bottom-left-radius: 5px;
        }
        
        .chatbot-input {
            padding: 1rem;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
        }
        
        .chatbot-input button {
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chatbot-toggle {
            position: fixed;
            bottom: 160px;
            right: 25px;
            background: var(--gradient);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            z-index: 1002;
            transition: all 0.3s ease;
        }
        
        .chatbot-toggle:hover {
            transform: scale(1.1);
        }

        .calculator-widget {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .calculator-toggle {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            margin: 1rem 0;
            transition: all 0.3s ease;
            display: block;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            overflow: hidden;
        }
        
        .calculator-toggle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .calculator-toggle:hover::after {
            width: 300px;
            height: 300px;
        }
        
        .calculator-result {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1.5rem;
            border-left: 4px solid var(--accent-color);
            display: none;
        }

        .diagnostic-tool {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .diagnostic-step {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .diagnostic-step.active {
            display: block;
        }
        
        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .option-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .option-card:hover {
            background: var(--accent-light);
            color: white;
            transform: translateY(-5px);
        }

        .hero {
            height: 600px;
            background: linear-gradient(rgba(9, 24, 39, 0.7), rgba(26, 54, 93, 0.7)), url('https://images.unsplash.com/photo-1603621408626-dc1fb97dbbc2?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fHRlY25vbG9naWElMjBvZmljaW5hJTIwZW50cmFkYXxlbnwwfHwwfHx8MA%3D%3D') no-repeat center center/cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
        }
        
        .hero-content {
            z-index: 1;
            max-width: 800px;
            padding: 2rem;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hero h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            max-width: 600px;
        }
        
        .btn {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 0.8rem 1.8rem;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(60, 186, 84, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                        transparent, 
                        rgba(255,255,255,0.2), 
                        transparent);
            transition: left 0.7s ease;
            z-index: -1;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .btn:hover::after {
            width: 300px;
            height: 300px;
        }
        
        .btn:hover {
            background: var(--accent-light);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(60, 186, 84, 0.4);
        }
        
        .services {
            padding: 6rem 2rem;
            text-align: center;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
        }
        
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 2px;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .service-content {
            padding: 1.5rem;
        }
        
        .service-content h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .service-price {
            color: var(--accent-color);
            font-weight: bold;
            margin: 10px 0;
            font-size: 1.2rem;
        }
        
        .price-note {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .add-to-cart {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .add-to-cart::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                        transparent, 
                        rgba(255,255,255,0.2), 
                        transparent);
            transition: left 0.7s ease;
            z-index: -1;
        }
        
        .add-to-cart:hover::before {
            left: 100%;
        }
        
        .add-to-cart::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .add-to-cart:hover::after {
            width: 300px;
            height: 300px;
        }
        
        .add-to-cart:hover {
            background: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .about {
            padding: 6rem 2rem;
            background-color: var(--light-color);
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
        }
        
        .about-content {
            flex: 1;
            min-width: 300px;
            padding: 2rem;
        }
        
        .about-image {
            flex: 1;
            min-width: 300px;
            height: 400px;
            background: url('https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=1350') no-repeat center center/cover;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.5s ease;
        }
        
        .about-image:hover {
            transform: scale(1.02);
        }
        
        .location {
            padding: 6rem 2rem;
            text-align: center;
            background: linear-gradient(to bottom, #e9ecef, #f8f9fa);
        }
        
        .map-container {
            max-width: 1000px;
            margin: 2rem auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .map-container:hover {
            transform: scale(1.01);
        }
        
        .map-container iframe {
            width: 100%;
            height: 400px;
            border: none;
        }
        
        .contact {
            padding: 6rem 2rem;
            background: var(--gradient);
            color: white;
            text-align: center;
        }
        
        .contact-form {
            max-width: 600px;
            margin: 2rem auto;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark-color);
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(60, 186, 84, 0.2);
            outline: none;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(60, 186, 84, 0.2);
        }
        
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            padding: 3rem 2rem;
        }
        
        .social-links {
            margin: 1.5rem 0;
        }
        
        .social-links a {
            color: white;
            margin: 0 10px;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .social-links a:hover {
            color: var(--accent-light);
            transform: translateY(-5px);
        }
        
        .whatsapp-float {
            position: fixed;
            bottom: 25px;
            left: 25px;
            background: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(37, 211, 102, 0.4);
            z-index: 1001;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(37, 211, 102, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
            }
        }
        
        .whatsapp-float:hover {
            transform: scale(1.1);
            background: #128C7E;
        }
        
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.2);
            z-index: 1005;
            overflow-y: auto;
        }
        
        .cart-header {
            background: var(--gradient);
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .close-cart {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-cart:hover {
            transform: rotate(90deg);
            background: rgba(255,255,255,0.1);
        }
        
        .cart-items {
            padding: 1rem;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
            gap: 10px;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-info h4 {
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .cart-item-price {
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .cart-total {
            padding: 1.5rem;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.2rem;
            background: #f8f9fa;
        }
        
        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .checkout-btn:hover {
            background: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .schedule-btn {
            width: 100%;
            padding: 1rem;
            background: #f8f9fa;
            color: var(--primary-color);
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .schedule-btn:hover {
            background: var(--accent-color);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1004;
        }
        
        /* Estados de carga */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* Mejoras de accesibilidad */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .required {
            color: #e53e3e;
        }
        
        .form-error {
            color: #e53e3e;
            font-size: 0.8rem;
            margin-top: 0.3rem;
            display: none;
        }
        
        .form-error.active {
            display: block;
        }
        
        /* Animaciones de entrada */
        .fade-in {
            animation: fadeIn 1s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ============================================
           ESTILOS PARA SISTEMA DE COTIZACIONES
           ============================================ */
        
        .quotation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1006;
            overflow-y: auto;
            padding: 20px;
        }
        
        .quotation-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            max-width: 1000px;
            margin: 20px auto;
            padding: 2.5rem;
            position: relative;
            animation: fadeInUp 0.3s ease;
        }
        
        .quotation-header {
            background: var(--gradient);
            color: white;
            padding: 1.5rem;
            border-radius: 15px 15px 0 0;
            margin: -2.5rem -2.5rem 2rem -2.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quotation-title {
            margin: 0;
            font-size: 1.8rem;
        }
        
        .quotation-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .quotation-close:hover {
            background: rgba(255,255,255,0.1);
            transform: rotate(90deg);
        }
        
        .quotation-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .company-info, .client-info {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid var(--accent-color);
        }
        
        .quotation-details {
            margin-bottom: 2rem;
        }
        
        .quotation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .quotation-table th {
            background: var(--gradient);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        
        .quotation-table td {
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .quotation-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .quotation-table tr:hover {
            background: #e9ecef;
        }
        
        .quotation-totals {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 0;
            border-bottom: 1px solid #ddd;
        }
        
        .total-row:last-child {
            border-bottom: none;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .total-row.grand-total {
            font-size: 1.3rem;
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .quotation-notes {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid var(--accent-color);
        }
        
        .quotation-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .quotation-btn {
            flex: 1;
            min-width: 200px;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .quotation-btn.primary {
            background: var(--gradient);
            color: white;
        }
        
        .quotation-btn.secondary {
            background: #f8f9fa;
            color: var(--primary-color);
            border: 2px solid var(--accent-color);
        }
        
        .quotation-btn.success {
            background: var(--accent-color);
            color: white;
        }
        
        .quotation-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .quotation-btn.primary:hover {
            background: var(--accent-color);
        }
        
        .quotation-btn.secondary:hover {
            background: var(--accent-color);
            color: white;
        }
        
        .quotation-btn.success:hover {
            background: var(--accent-light);
        }
        
        /* Estilos para la copia interna */
        .internal-copy {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px dashed var(--accent-color);
        }
        
        .copy-label {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        
        .signature-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #eee;
        }
        
        .signature-box {
            text-align: center;
            padding: 1.5rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .signature-line {
            height: 2px;
            background: #333;
            margin: 2rem 0 0.5rem 0;
        }
        
        /* Estilos para el formulario de cotización */
        .quotation-form {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .quotation-form .form-group {
            margin-bottom: 1rem;
        }
        
        /* Quick Replies */
        .quick-replies {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .quick-reply {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .quick-reply:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .message .quick-reply {
            margin: 5px 5px 5px 0;
        }
        
        /* Typing Indicator */
        .typing {
            background: #f0f0f0 !important;
            border: 1px solid #ddd !important;
        }
        
        .typing-dots {
            display: inline-flex;
            gap: 4px;
        }
        
        .typing-dots span {
            width: 8px;
            height: 8px;
            background: #666;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
        }
        
        .typing-dots span:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .typing-dots span:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        @keyframes typing {
            0%, 80%, 100% { 
                transform: scale(0.8); 
                opacity: 0.5; 
            }
            40% { 
                transform: scale(1); 
                opacity: 1; 
            }
        }
        
        /* Mejoras para mensajes del bot */
        .bot-message {
            line-height: 1.5;
            font-size: 0.95rem;
        }
        
        .bot-message strong {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        /* Mejor scrollbar para mensajes */
        .chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chatbot-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .chatbot-messages::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 3px;
        }
        
        .chatbot-messages::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }
        
        /* ============================================
           ESTILOS PARA SISTEMA DE CONTROL
           ============================================ */
        
        .admin-panel {
            position: fixed;
            bottom: 100px;
            left: 25px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border-radius: 50%;
            display: none; /* OCULTO POR DEFECTO - SE ACTIVA CON CÓDIGO SECRETO */
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(238, 90, 82, 0.4);
            z-index: 1006;
            transition: all 0.3s ease;
            animation: adminPulse 3s infinite;
        }
        
        @keyframes adminPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(238, 90, 82, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(238, 90, 82, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(238, 90, 82, 0);
            }
        }
        
        .admin-panel:hover {
            transform: scale(1.1);
            background: linear-gradient(135deg, #ee5a52, #ff6b6b);
        }
        
        .admin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1007;
            overflow-y: auto;
            padding: 20px;
        }
        
        .admin-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            max-width: 1200px;
            margin: 20px auto;
            padding: 2rem;
            position: relative;
            animation: fadeInUp 0.3s ease;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 1.5rem;
            border-radius: 15px 15px 0 0;
            margin: -2rem -2rem 2rem -2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-title {
            margin: 0;
            font-size: 1.8rem;
        }
        
        .admin-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .admin-close:hover {
            background: rgba(255,255,255,0.1);
            transform: rotate(90deg);
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .admin-tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .admin-tab.active {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
        }
        
        .admin-tab:hover:not(.active) {
            background: #e9ecef;
        }
        
        .admin-content {
            display: none;
        }
        
        .admin-content.active {
            display: block;
        }
        
        .quotations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .quotation-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .quotation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .quotation-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .quotation-number {
            font-weight: bold;
            color: #091827;
            font-size: 1.1rem;
        }
        
        .quotation-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-pending { background: #fff3cd; color: #856404; }
        .status-approved { background: #d4edda; color: #155724; }
        .status-rejected { background: #f8d7da; color: #721c24; }
        .status-in-progress { background: #d1ecf1; color: #0c5460; }
        .status-on-hold { background: #e2e3e5; color: #383d41; }
        
        .quotation-client {
            margin-bottom: 1rem;
        }
        
        .quotation-client h4 {
            margin-bottom: 5px;
            color: #091827;
        }
        
        .quotation-details {
            margin: 1rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .quotation-actions {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }
        
        .admin-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .admin-btn.view {
            background: #091827;
            color: white;
        }
        
        .admin-btn.edit {
            background: #1a365d;
            color: white;
        }
        
        .admin-btn.delete {
            background: #dc3545;
            color: white;
        }
        
        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #e9ecef;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-top: 4px solid;
        }
        
        .stat-card.total {
            border-color: #091827;
        }
        
        .stat-card.pending {
            border-color: #ffc107;
        }
        
        .stat-card.approved {
            border-color: #28a745;
        }
        
        .stat-card.revenue {
            border-color: #007bff;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .filter-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        
        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .filter-group {
            margin-bottom: 0;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #091827;
        }
        
        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        /* Estilos para la cotización limpia del cliente */
        .quotation-client-version {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .quotation-logo {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .quotation-logo .automation-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
        }
        
        .company-name-quotation {
            font-size: 2rem;
            font-weight: 800;
            color: #091827;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        
        .company-name-quotation .tech {
            color: #3cba54;
        }
        
        .client-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #eee;
        }
        
        .client-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 200px;
            justify-content: center;
        }
        
        .client-btn.print {
            background: #091827;
            color: white;
        }
        
        .client-btn.email {
            background: #3cba54;
            color: white;
        }
        
        .client-btn.close {
            background: #6c757d;
            color: white;
        }
        
        .client-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .client-btn.print:hover {
            background: #1a365d;
        }
        
        .client-btn.email:hover {
            background: #5cdb74;
        }
        
        .client-btn.close:hover {
            background: #868e96;
        }
        
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 10px;
            }
            
            .brand-container {
                order: 1;
                width: 100%;
            }
            
            .header-controls {
                order: 2;
                width: 100%;
                justify-content: center;
            }
            
            .hero h2 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .automation-logo {
                width: 50px;
                height: 50px;
            }
            
            .company-name {
                font-size: 1.8rem;
            }
            
            .chatbot-widget {
                width: calc(100% - 20px);
                height: 70vh;
                right: 10px;
                bottom: 80px;
            }
            
            .info-panel {
                width: calc(100% - 40px);
                max-width: 300px;
                right: 20px;
                left: 20px;
                margin: 0 auto;
                bottom: 180px;
            }
            
            .info-panel.whatsapp-panel {
                left: 20px;
                right: 20px;
                bottom: 180px;
            }
            
            .chatbot-toggle {
                bottom: 180px;
                right: 20px;
            }
            
            .whatsapp-float {
                bottom: 20px;
                left: 20px;
            }
            
            .cart-modal {
                width: 100%;
            }
            
            .submenu-grid {
                grid-template-columns: 1fr;
            }
            
            /* Ajustes para cotizaciones en móvil */
            .quotation-container {
                padding: 1.5rem;
                margin: 10px auto;
            }
            
            .quotation-header {
                margin: -1.5rem -1.5rem 1.5rem -1.5rem;
                padding: 1rem;
            }
            
            .quotation-info {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .quotation-actions {
                flex-direction: column;
            }
            
            .quotation-btn {
                min-width: 100%;
            }
            
            .quotation-table {
                font-size: 0.9rem;
            }
            
            .quotation-table th,
            .quotation-table td {
                padding: 0.8rem 0.5rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .signature-section {
                grid-template-columns: 1fr;
            }
            
            /* Ajustes para quick replies en móvil */
            .quick-replies {
                flex-direction: column;
                gap: 5px;
            }
            
            .quick-reply {
                width: 100%;
                text-align: center;
            }
            
            /* Responsive para admin */
            .admin-panel {
                bottom: 180px;
                left: 20px;
            }
            
            .quotations-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-container {
                padding: 1rem;
            }
            
            .admin-header {
                margin: -1rem -1rem 1.5rem -1rem;
                padding: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .client-actions {
                flex-direction: column;
            }
            
            .client-btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .company-name {
                font-size: 1.5rem;
            }
            
            .option-grid {
                grid-template-columns: 1fr;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .info-panel {
                width: calc(100% - 30px);
                padding: 1rem;
            }
            
            .chatbot-widget {
                height: 80vh;
                bottom: 70px;
            }
            
            .quotation-container {
                padding: 1rem;
            }
            
            .quotation-title {
                font-size: 1.4rem;
            }
            
            .quotation-table {
                font-size: 0.8rem;
            }
            
            .total-row {
                font-size: 0.9rem;
            }
            
            .quick-reply {
                padding: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- CONTENIDO ORIGINAL COMPLETO -->
    <header role="banner">
        <div class="header-content">
            <div class="header-top">
                <div class="brand-container">
                    <div class="company-name">
                        <span class="mitro">Mitro</span><span class="tech">nixs</span>
                    </div>
                    
                    <div class="logo-container">
                        <div class="automation-logo">
                            <div class="logo-base"></div>
                            <div class="connection-ring"></div>
                            <div class="control-node"></div>
                            <div class="robotic-arm arm-segment-1"></div>
                            <div class="robotic-arm arm-segment-2"></div>
                            <div class="robotic-arm arm-segment-3"></div>
                            <div class="iot-node node-1"></div>
                            <div class="iot-node node-2"></div>
                            <div class="iot-node node-3"></div>
                            <div class="iot-node node-4"></div>
                            <div class="iot-node node-5"></div>
                            <div class="iot-node node-6"></div>
                            <div class="data-flow">
                                <div class="flow-line flow-1"></div>
                                <div class="flow-line flow-2"></div>
                                <div class="flow-line flow-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="header-controls">
                    <button class="language-toggle" id="language-toggle" aria-label="Cambiar idioma">
                        <i class="fas fa-globe"></i> ES
                    </button>
                    <button class="cart-toggle" id="cart-toggle" aria-label="Abrir carrito de compras">
                        <i class="fas fa-shopping-cart"></i> 
                        <span class="cart-count">0</span>
                        <span class="sr-only">Artículos en el carrito</span>
                    </button>
                </div>
            </div>
            
            <div class="slogan-container">
                <div class="slogan es active">Soluciones Inteligentes para una Industria Conectada</div>
                <div class="slogan en">Smart Solutions for a Connected Industry</div>
            </div>
            
            <nav aria-label="Navegación principal">
                <ul>
                    <li><a href="#inicio" data-key="inicio" class="active">Inicio</a></li>
                    <li><a href="#servicios" data-key="servicios">Servicios</a></li>
                    <li><a href="#nosotros" data-key="nosotros">Nosotros</a></li>
                    <li><a href="#ubicacion" data-key="ubicacion">Ubicación</a></li>
                    <li><a href="#contacto" data-key="contacto">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main role="main">
        <section id="inicio" class="hero">
            <div class="hero-content">
                <h2 data-key="hero-title">Soluciones de Automatización, Cómputo Industrial y Programación Avanzada</h2>
                <p data-key="hero-text">Expertos en ingeniería, sistemas electrónicos de control, cómputo industrial, robótica, desarrollo web y machine learning</p>
                <a href="#contacto" class="btn" data-key="contact-us">Contáctanos</a>
                <button class="calculator-toggle" id="calculator-hero-toggle" data-key="calculate-savings">
                    <i class="fas fa-calculator"></i> Calcular Ahorro con Automatización
                </button>
            </div>
        </section>

        <section class="calculator-widget" id="roi-calculator">
            <h3 data-key="roi-calculator">Calculadora de ROI para Automatización</h3>
            <div class="form-group">
                <label for="operarios" data-key="current-operators">Número de operarios actuales:</label>
                <input type="number" id="operarios" min="1" max="100" value="5" required>
                <div class="form-error" id="operarios-error"></div>
            </div>
            <div class="form-group">
                <label for="horas" data-key="daily-hours">Horas de trabajo diarias:</label>
                <input type="number" id="horas" min="1" max="24" value="8" required>
                <div class="form-error" id="horas-error"></div>
            </div>
            <div class="form-group">
                <label for="dias" data-key="monthly-days">Días trabajados por mes:</label>
                <input type="number" id="dias" min="1" max="31" value="22" required>
                <div class="form-error" id="dias-error"></div>
            </div>
            <div class="form-group">
                <label for="salario" data-key="average-salary">Salario promedio por operario (MXN):</label>
                <input type="number" id="salario" min="1000" value="8000" required>
                <div class="form-error" id="salario-error"></div>
            </div>
            <button class="btn" onclick="calcularROI()" data-key="calculate-savings-btn">Calcular Ahorro</button>
            
            <div class="calculator-result" id="roi-result">
                <h4 data-key="analysis-result">Resultado del Análisis:</h4>
                <p id="ahorro-mensual"></p>
                <p id="roi-periodo"></p>
                <p id="recomendacion"></p>
            </div>
        </section>

        <section id="servicios" class="services">
            <h2 class="section-title" data-key="services-title">Nuestros Servicios</h2>
            
            <div class="diagnostic-tool">
                <h3 data-key="diagnostic-tool">Diagnosticador Inteligente de Problemas</h3>
                <p data-key="select-problem">Selecciona el tipo de problema que estás experimentando:</p>
                
                <div class="diagnostic-step active" id="step-1">
                    <div class="option-grid">
                        <div class="option-card" onclick="selectOption('conectividad')">
                            <i class="fas fa-wifi fa-2x"></i>
                            <h4 data-key="connectivity">Problemas de Conectividad</h4>
                            <p data-key="connectivity-desc">Redes, comunicación, buses de campo</p>
                        </div>
                        <div class="option-card" onclick="selectOption('rendimiento')">
                            <i class="fas fa-tachometer-alt fa-2x"></i>
                            <h4 data-key="performance">Bajo Rendimiento</h4>
                            <p data-key="performance-desc">Sistemas lentos, respuesta ineficiente</p>
                        </div>
                        <div class="option-card" onclick="showAutomationSubmenu()">
                            <i class="fas fa-robot fa-2x"></i>
                            <h4 data-key="automation">Automatización</h4>
                            <p data-key="automation-desc">PLC, SCADA, sensores, actuadores</p>
                        </div>
                        <div class="option-card" onclick="showComputoSubmenu()">
                            <i class="fas fa-server fa-2x"></i>
                            <h4 data-key="computo">Cómputo Industrial</h4>
                            <p data-key="computo-desc">Servidores, redes, HMI, sistemas embebidos</p>
                        </div>
                        <div class="option-card" onclick="showProgrammingSubmenu()">
                            <i class="fas fa-code fa-2x"></i>
                            <h4 data-key="telecomunicaciones">Programación Avanzada</h4>
                            <p data-key="programming-desc">Ladder, SCADA, web, machine learning</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-img">
                        <img src="https://images.unsplash.com/photo-1652145595413-0a79398e5888?w=500&auto=format&fit=crop&q=60" 
                             alt="Panel de control industrial moderno con interfaces táctiles"
                             loading="lazy">
                    </div>
                    <div class="service-content">
                        <h3 data-key="electrodomesticos">Sistemas Electrónicos de Control</h3>
                        <p data-key="electrodomesticos-desc">Diseño, implementación y mantenimiento de sistemas electrónicos de control automatizados con tecnología de punta y personal calificado.</p>
                        <div class="service-price"><span data-key="from-price">Desde</span> $1,200 MXN/hora</div>
                        <div class="price-note">*Costo por hora de servicio especializado</div>
                        <button class="add-to-cart" data-service="Sistemas Electrónicos de Control" data-price="1200" data-image="https://images.unsplash.com/photo-1652145595413-0a79398e5888?w=500&auto=format&fit=crop&q=60" data-key="add-to-cart">Agregar al carrito</button>
                    </div>
                </div>
                
                <div class="service-card">
                    <div class="service-img">
                        <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1350" 
                             alt="Servidores industriales en rack con cableado organizado"
                             loading="lazy">
                    </div>
                    <div class="service-content">
                        <h3 data-key="computo">Cómputo Industrial</h3>
                        <p data-key="computo-desc">Soluciones integrales en hardware y software para equipos de cómputo industrial, desde servidores hasta sistemas embebidos.</p>
                        <div class="service-price"><span data-key="from-price">Desde</span> $1,500 MXN/hora</div>
                        <div class="price-note">*Costo por hora de servicio especializado</div>
                        <button class="add-to-cart" data-service="Cómputo Industrial" data-price="1500" data-image="https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1350" data-key="add-to-cart">Agregar al carrito</button>
                    </div>
                </div>
                
                <div class="service-card">
                    <div class="service-img">
                        <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1350" 
                             alt="Programador trabajando en código avanzado con múltiples monitores"
                             loading="lazy">
                    </div>
                    <div class="service-content">
                        <h3 data-key="telecomunicaciones">Programación Avanzada</h3>
                        <p data-key="telecomunicaciones-desc">Desarrollo de software especializado, desde aplicaciones web hasta sistemas con machine learning e inteligencia artificial.</p>
                        <div class="service-price"><span data-key="from-price">Desde</span> $1,800 MXN/hora</div>
                        <div class="price-note">*Costo por hora de servicio especializado</div>
                        <button class="add-to-cart" data-service="Programación Avanzada" data-price="1800" data-image="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1350" data-key="add-to-cart">Agregar al carrito</button>
                    </div>
                </div>
                
                <div class="service-card">
                    <div class="service-img">
                        <img src="https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1350" 
                             alt="Brazo robótico industrial de alta precisión en operación"
                             loading="lazy">
                    </div>
                    <div class="service-content">
                        <h3 data-key="robotica">Robótica Industrial</h3>
                        <p data-key="robotica-desc">Diseño, programación y mantenimiento de sistemas robóticos para aplicaciones industriales avanzadas.</p>
                        <div class="service-price"><span data-key="from-price">Desde</span> $2,500 MXN/hora</div>
                        <div class="price-note">*Costo por hora de servicio especializado</div>
                        <button class="add-to-cart" data-service="Robótica Industrial" data-price="2500" data-image="https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1350" data-key="add-to-cart">Agregar al carrito</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="nosotros" class="about">
            <div class="about-content">
                <h2 class="section-title" data-key="about-title">Sobre Nosotros</h2>
                <p data-key="about-text1">Mitronixs es una empresa con sede en Providencia, Guadalajara Jalisco, especializada en servicios de ingeniería de alta calidad. Contamos con más de 25 años de experiencia en el sector tecnológico.</p>
                <p data-key="about-text2">Nuestro equipo de ingenieros y desarrolladores altamente capacitados está comprometido con brindar soluciones eficientes e innovadoras para todas las necesidades tecnológicas de nuestros clientes.</p>
                <p data-key="about-text3">Trabajamos con los más altos estándares de calidad y utilizamos tecnología de punta para garantizar la satisfacción total de nuestros clientes.</p>
                
                <button class="calculator-toggle" id="calculator-about-toggle" data-key="calculate-savings-about">
                    <i class="fas fa-calculator"></i> Calcular Ahorro con Nuestras Soluciones
                </button>
            </div>
            <div class="about-image"></div>
        </section>

        <section id="ubicacion" class="location">
            <h2 class="section-title" data-key="location-title">Nuestra Ubicación</h2>
            <p data-key="location-text">Visítanos en nuestra oficina en Providencia, Guadalajara Jalisco</p>
            <div class="map-container">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3732.966344715832!2d-103.3918189246862!3d20.67378098088406!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8428ae3a95d9452d%3A0x6d4e8a823c3b6e3e!2sProvidencia%2C%2044630%20Guadalajara%2C%20Jal.!5e0!3m2!1ses!2smx!4v1687891234567!5m2!1ses!2smx" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade"
                    title="Ubicación de Mitronixs en Providencia, Guadalajara">
                </iframe>
            </div>
        </section>

        <section id="contacto" class="contact">
            <h2 class="section-title" data-key="contact-title">Contáctanos</h2>
            <p data-key="contact-text">Estamos para servirte. Ponte en contacto con nosotros para cualquier consulta o solicitud de servicio.</p>
            
            <div class="contact-form">
                <form id="contactForm" novalidate>
                    <div class="form-group">
                        <label for="name" id="label-name" data-key="name">
                            Nombre <span class="required" aria-hidden="true">*</span>
                        </label>
                        <input type="text" id="name" name="name" 
                               aria-required="true" 
                               aria-labelledby="label-name"
                               data-key="name-placeholder" 
                               placeholder="Tu nombre completo" 
                               required>
                        <div class="form-error" id="name-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" id="label-email" data-key="email">
                            Correo electrónico <span class="required" aria-hidden="true">*</span>
                        </label>
                        <input type="email" id="email" name="email"
                               aria-required="true"
                               aria-labelledby="label-email"
                               data-key="email-placeholder" 
                               placeholder="Correo@servidor.com" 
                               required>
                        <div class="form-error" id="email-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone" id="label-phone" data-key="phone">Teléfono</label>
                        <input type="tel" id="phone" name="phone"
                               aria-labelledby="label-phone"
                               data-key="phone-placeholder" 
                               placeholder="+52 33 1234 5678">
                        <div class="form-error" id="phone-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="message" id="label-message" data-key="message">
                            Mensaje <span class="required" aria-hidden="true">*</span>
                        </label>
                        <textarea id="message" name="message"
                                  aria-required="true"
                                  aria-labelledby="label-message"
                                  data-key="message-placeholder" 
                                  placeholder="Describe tu consulta o necesidad" 
                                  required></textarea>
                        <div class="form-error" id="message-error"></div>
                    </div>
                    
                    <button type="submit" class="btn" data-key="send-message">Enviar Mensaje</button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <p data-key="footer">Mitronixs SAS de CV &copy; 2026 - Todos los derechos reservados</p>
        <p data-key="footer-location">Providencia, Guadalajara Jalisco, México</p>
        <div class="social-links">
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
        </div>
    </footer>

    <!-- Modal de Cotización -->
    <div class="quotation-modal" id="quotation-modal">
        <div class="quotation-container" id="quotation-content">
            <!-- Contenido generado dinámicamente -->
        </div>
    </div>

    <!-- Modal de cotización limpia para el cliente -->
    <div class="quotation-modal" id="client-quotation-modal">
        <div class="quotation-container">
            <div id="client-quotation-content">
                <!-- Contenido generado dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Paneles informativos y widgets -->
    <div class="info-panel whatsapp-panel" id="whatsapp-panel">
        <button class="info-panel-close" id="close-whatsapp-panel">&times;</button>
        <div class="info-panel-header">
            <div class="info-panel-icon whatsapp-icon">
                <i class="fab fa-whatsapp"></i>
            </div>
            <h3>WhatsApp Business</h3>
        </div>
        <p>¿Necesitas ayuda inmediata? Chatea con nosotros por WhatsApp para atención personalizada.</p>
        <div class="info-panel-buttons">
            <button class="info-panel-btn primary" id="open-whatsapp">
                <i class="fab fa-whatsapp"></i> Abrir WhatsApp
            </button>
            <button class="info-panel-btn secondary" id="close-whatsapp-panel-btn">
                Cerrar
            </button>
        </div>
    </div>

    <div class="info-panel" id="chatbot-panel">
        <button class="info-panel-close" id="close-chatbot-panel">&times;</button>
        <div class="info-panel-header">
            <div class="info-panel-icon chatbot-icon">
                <i class="fas fa-robot"></i>
            </div>
            <h3>Asistente Virtual</h3>
        </div>
        <p>Hola, soy tu asistente virtual. ¿En qué puedo ayudarte hoy?</p>
        <div class="info-panel-buttons">
            <button class="info-panel-btn primary" id="open-chatbot">
                <i class="fas fa-comments"></i> Abrir Chatbot
            </button>
            <button class="info-panel-btn secondary" id="close-chatbot-panel-btn">
                Cerrar
            </button>
        </div>
    </div>

    <a href="https://wa.me/523312345678?text=Hola,%20me%20interesan%20sus%20servicios%20de%20ingeniería" class="whatsapp-float" target="_blank" aria-label="Contactar por WhatsApp" id="whatsapp-float">
        <i class="fab fa-whatsapp" style="font-size: 28px;"></i>
    </a>

    <!-- Botón de panel de administración -->
    <div class="admin-panel" id="admin-panel" aria-label="Panel de administración">
        <i class="fas fa-chart-line"></i>
    </div>

    <div class="chatbot-toggle" id="chatbot-toggle" aria-label="Abrir asistente virtual">
        <i class="fas fa-robot" style="font-size: 24px;"></i>
        <span class="sr-only">Abrir chatbot</span>
    </div>

    <div class="chatbot-widget" id="chatbot-widget">
        <div class="chatbot-header">
            <h3>Asistente Virtual Mitronixs</h3>
            <button id="close-chatbot">&times;</button>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="message bot-message">
                ¡Hola! Soy tu asistente virtual de Mitronixs. ¿En qué puedo ayudarte hoy?
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbot-input" placeholder="Escribe tu mensaje...">
            <button id="send-chatbot-message">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    
    <!-- Modal del sistema de control -->
    <div class="admin-modal" id="admin-modal">
        <div class="admin-container" id="admin-container">
            <!-- Contenido generado dinámicamente -->
        </div>
    </div>
    
    <div class="cart-modal" id="cart-modal">
        <div class="cart-header">
            <h3 id="cart-title" data-key="cart">Tu Carrito de Servicios</h3>
            <button class="close-cart" id="close-cart" aria-label="Cerrar carrito de compras">&times;</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Los elementos del carrito se agregarán aquí dinámicamente -->
        </div>
        <div class="cart-total">
            <span id="cart-total-label" data-key="total">Total estimado:</span>
            <span id="cart-total">$0 MXN</span>
        </div>
        <div style="padding: 0 1.5rem 1.5rem;">
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem; text-align: center;">
                Los precios son por hora de servicio especializado. Contacta con nosotros para una cotización precisa.
            </p>
            <button class="checkout-btn" id="generate-quotation-btn">
                <i class="fas fa-file-invoice-dollar"></i> Generar Cotización
            </button>
            <button class="schedule-btn" id="schedule-btn">
                <i class="fas fa-calendar-alt"></i> Agendar Cita en Google Calendar
            </button>
        </div>
    </div>

    <script>
        // ============================================
        // FUNCIONES PARA EL DIAGNOSTICADOR
        // ============================================

        function selectOption(option) {
            if (option === 'conectividad') {
                showConnectivitySubmenu();
            } else if (option === 'rendimiento') {
                showPerformanceSubmenu();
            } else {
                alert(`Opción seleccionada: ${option}. Esta funcionalidad está en desarrollo.`);
            }
        }

        function showAutomationSubmenu() {
            const diagnosticTool = document.querySelector('.diagnostic-tool');
            const step1 = document.getElementById('step-1');
            const lang = TranslationSystem.getCurrentLang();
            
            const submenuHTML = `
                <div class="diagnostic-step active" id="automation-submenu">
                    <button class="btn" onclick="goBackToStep1()" style="margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> ${TranslationSystem.translate('back-button')}
                    </button>
                    <h4>${TranslationSystem.translate('problems-automation')}</h4>
                    <div class="submenu-grid">
                        <div class="submenu-card" onclick="showSolution('PLC')">
                            <i class="fas fa-microchip"></i>
                            <h4>${TranslationSystem.translate('plc-failures')}</h4>
                            <p>${TranslationSystem.translate('plc-failures-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('SCADA')">
                            <i class="fas fa-tachometer-alt"></i>
                            <h4>${TranslationSystem.translate('scada-systems')}</h4>
                            <p>${TranslationSystem.translate('scada-systems-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('SENSORES')">
                            <i class="fas fa-satellite-dish"></i>
                            <h4>${TranslationSystem.translate('sensors-actuators')}</h4>
                            <p>${TranslationSystem.translate('sensors-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('COMUNICACION')">
                            <i class="fas fa-network-wired"></i>
                            <h4>${TranslationSystem.translate('industrial-com')}</h4>
                            <p>${TranslationSystem.translate('industrial-com-desc')}</p>
                        </div>
                    </div>
                </div>
            `;
            
            if (step1) step1.classList.remove('active');
            diagnosticTool.insertAdjacentHTML('beforeend', submenuHTML);
        }

        function showComputoSubmenu() {
            const diagnosticTool = document.querySelector('.diagnostic-tool');
            const step1 = document.getElementById('step-1');
            const lang = TranslationSystem.getCurrentLang();
            
            const submenuHTML = `
                <div class="diagnostic-step active" id="computo-submenu">
                    <button class="btn" onclick="goBackToStep1()" style="margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> ${TranslationSystem.translate('back-button')}
                    </button>
                    <h4>${TranslationSystem.translate('problems-computing')}</h4>
                    <div class="submenu-grid">
                        <div class="submenu-card" onclick="showSolution('SERVER')">
                            <i class="fas fa-server"></i>
                            <h4>${TranslationSystem.translate('industrial-servers')}</h4>
                            <p>${TranslationSystem.translate('servers-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('RED')">
                            <i class="fas fa-wifi"></i>
                            <h4>${TranslationSystem.translate('industrial-networks')}</h4>
                            <p>${TranslationSystem.translate('industrial-networks-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('HMI')">
                            <i class="fas fa-tv"></i>
                            <h4>${TranslationSystem.translate('hmi-interfaces')}</h4>
                            <p>${TranslationSystem.translate('hmi-interfaces-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('EMBEBIDO')">
                            <i class="fas fa-microchip"></i>
                            <h4>${TranslationSystem.translate('embedded-systems')}</h4>
                            <p>${TranslationSystem.translate('embedded-desc')}</p>
                        </div>
                    </div>
                </div>
            `;
            
            if (step1) step1.classList.remove('active');
            diagnosticTool.insertAdjacentHTML('beforeend', submenuHTML);
        }

        function showProgrammingSubmenu() {
            const diagnosticTool = document.querySelector('.diagnostic-tool');
            const step1 = document.getElementById('step-1');
            const lang = TranslationSystem.getCurrentLang();
            
            const submenuHTML = `
                <div class="diagnostic-step active" id="programming-submenu">
                    <button class="btn" onclick="goBackToStep1()" style="margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> ${TranslationSystem.translate('back-button')}
                    </button>
                    <h4>${TranslationSystem.translate('problems-programming')}</h4>
                    <div class="submenu-grid">
                        <div class="submenu-card" onclick="showSolution('LADDER')">
                            <i class="fas fa-sitemap"></i>
                            <h4>${TranslationSystem.translate('ladder-programming')}</h4>
                            <p>${TranslationSystem.translate('ladder-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('SCADA-PROG')">
                            <i class="fas fa-code"></i>
                            <h4>${TranslationSystem.translate('scada-programming')}</h4>
                            <p>${TranslationSystem.translate('scada-prog-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('WEB')">
                            <i class="fas fa-globe"></i>
                            <h4>${TranslationSystem.translate('web-development')}</h4>
                            <p>${TranslationSystem.translate('web-dev-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('IA')">
                            <i class="fas fa-brain"></i>
                            <h4>${TranslationSystem.translate('ai-ml')}</h4>
                            <p>${TranslationSystem.translate('ai-ml-desc')}</p>
                        </div>
                    </div>
                </div>
            `;
            
            if (step1) step1.classList.remove('active');
            diagnosticTool.insertAdjacentHTML('beforeend', submenuHTML);
        }

        function showConnectivitySubmenu() {
            const diagnosticTool = document.querySelector('.diagnostic-tool');
            const step1 = document.getElementById('step-1');
            const lang = TranslationSystem.getCurrentLang();
            
            const submenuHTML = `
                <div class="diagnostic-step active" id="connectivity-submenu">
                    <button class="btn" onclick="goBackToStep1()" style="margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> ${TranslationSystem.translate('back-button')}
                    </button>
                    <h4>${TranslationSystem.translate('problems-connectivity')}</h4>
                    <div class="submenu-grid">
                        <div class="submenu-card" onclick="showSolution('RED-INDUSTRIAL')">
                            <i class="fas fa-network-wired"></i>
                            <h4>${TranslationSystem.translate('industrial-network')}</h4>
                            <p>${TranslationSystem.translate('industrial-network-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('WIRELESS')">
                            <i class="fas fa-wifi"></i>
                            <h4>${TranslationSystem.translate('wireless-connectivity')}</h4>
                            <p>${TranslationSystem.translate('wireless-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('BUS-FIELD')">
                            <i class="fas fa-broadcast-tower"></i>
                            <h4>${TranslationSystem.translate('field-buses')}</h4>
                            <p>${TranslationSystem.translate('field-buses-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('FIBRA-OPTICA')">
                            <i class="fas fa-satellite"></i>
                            <h4>${TranslationSystem.translate('fiber-optic')}</h4>
                            <p>${TranslationSystem.translate('fiber-optic-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('COM-SERIAL')">
                            <i class="fas fa-portrait"></i>
                            <h4>${TranslationSystem.translate('serial-com')}</h4>
                            <p>${TranslationSystem.translate('serial-com-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('VPN-INDUSTRIAL')">
                            <i class="fas fa-shield-alt"></i>
                            <h4>${TranslationSystem.translate('industrial-vpn')}</h4>
                            <p>${TranslationSystem.translate('industrial-vpn-desc')}</p>
                        </div>
                    </div>
                </div>
            `;
            
            if (step1) step1.classList.remove('active');
            diagnosticTool.insertAdjacentHTML('beforeend', submenuHTML);
        }

        function showPerformanceSubmenu() {
            const diagnosticTool = document.querySelector('.diagnostic-tool');
            const step1 = document.getElementById('step-1');
            const lang = TranslationSystem.getCurrentLang();
            
            const submenuHTML = `
                <div class="diagnostic-step active" id="performance-submenu">
                    <button class="btn" onclick="goBackToStep1()" style="margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> ${TranslationSystem.translate('back-button')}
                    </button>
                    <h4>${TranslationSystem.translate('problems-performance')}</h4>
                    <div class="submenu-grid">
                        <div class="submenu-card" onclick="showSolution('PLC-LENTO')">
                            <i class="fas fa-tachometer-alt"></i>
                            <h4>${TranslationSystem.translate('slow-plc')}</h4>
                            <p>${TranslationSystem.translate('slow-plc-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('SCADA-LENTO')">
                            <i class="fas fa-desktop"></i>
                            <h4>${TranslationSystem.translate('slow-scada')}</h4>
                            <p>${TranslationSystem.translate('slow-scada-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('HMI-LENTA')">
                            <i class="fas fa-tv"></i>
                            <h4>${TranslationSystem.translate('slow-hmi')}</h4>
                            <p>${TranslationSystem.translate('slow-hmi-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('DATABASE-LENTA')">
                            <i class="fas fa-database"></i>
                            <h4>${TranslationSystem.translate('slow-database')}</h4>
                            <p>${TranslationSystem.translate('slow-database-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('COMUNICACION-LENTA')">
                            <i class="fas fa-exchange-alt"></i>
                            <h4>${TranslationSystem.translate('slow-communication')}</h4>
                            <p>${TranslationSystem.translate('slow-communication-desc')}</p>
                        </div>
                        <div class="submenu-card" onclick="showSolution('SERVER-LENTO')">
                            <i class="fas fa-server"></i>
                            <h4>${TranslationSystem.translate('slow-server')}</h4>
                            <p>${TranslationSystem.translate('slow-server-desc')}</p>
                        </div>
                    </div>
                </div>
            `;
            
            if (step1) step1.classList.remove('active');
            diagnosticTool.insertAdjacentHTML('beforeend', submenuHTML);
        }

        function goBackToStep1() {
            // Ocultar todos los submenús
            const submenus = document.querySelectorAll('.diagnostic-step:not(#step-1)');
            submenus.forEach(submenu => {
                submenu.remove();
            });
            
            // Mostrar paso 1
            const step1 = document.getElementById('step-1');
            if (step1) step1.classList.add('active');
        }

        function showSolution(problemType) {
            const solutions = {
                'PLC': {
                    title: 'Solución para Fallas en PLC',
                    description: 'Nuestros expertos realizan diagnóstico completo de PLCs, incluyendo:',
                    steps: [
                        'Diagnóstico de hardware y firmware',
                        'Revisión de programación ladder',
                        'Pruebas de entradas/salidas',
                        'Actualización de firmware',
                        'Backup y restauración de programas'
                    ],
                    recommendation: 'Contacta a nuestro equipo especializado en PLC para una evaluación gratuita.'
                },
                'SCADA': {
                    title: 'Solución para Sistemas SCADA',
                    description: 'Ofrecemos soporte completo para sistemas SCADA:',
                    steps: [
                        'Diagnóstico de servidores SCADA',
                        'Optimización de bases de datos históricas',
                        'Configuración de alarmas y eventos',
                        'Desarrollo de pantallas personalizadas',
                        'Integración con sistemas ERP/MES'
                    ],
                    recommendation: 'Agenda una demostración de nuestras soluciones SCADA.'
                },
                'SENSORES': {
                    title: 'Solución para Sensores y Actuadores',
                    description: 'Diagnóstico y calibración de dispositivos de campo:',
                    steps: [
                        'Calibración de sensores (temperatura, presión, nivel)',
                        'Pruebas de actuadores (válvulas, motores)',
                        'Verificación de señales 4-20mA / 0-10V',
                        'Optimización de tiempos de respuesta',
                        'Migración a sensores inteligentes'
                    ],
                    recommendation: 'Solicita nuestro servicio de calibración certificada.'
                },
                'COMUNICACION': {
                    title: 'Solución para Comunicación Industrial',
                    description: 'Diagnóstico y solución de problemas de comunicación:',
                    steps: [
                        'Pruebas de buses de campo (Profibus, Modbus, Ethernet/IP)',
                        'Análisis de tráfico de red',
                        'Configuración de gateways y routers industriales',
                        'Implementación de redundancia de red',
                        'Migración a protocolos modernos'
                    ],
                    recommendation: 'Nuestros especialistas en redes industriales pueden ayudarte.'
                },
                'SERVER': {
                    title: 'Solución para Servidores Industriales',
                    description: 'Mantenimiento y optimización de servidores:',
                    steps: [
                        'Diagnóstico de hardware de servidor',
                        'Optimización de sistemas RAID',
                        'Configuración de virtualización',
                        'Backup y recuperación de datos',
                        'Implementación de clusters de alta disponibilidad'
                    ],
                    recommendation: 'Contamos con planes de mantenimiento para servidores industriales.'
                },
                'HMI': {
                    title: 'Solución para Interfaces HMI',
                    description: 'Reparación y desarrollo de interfaces:',
                    steps: [
                        'Diagnóstico de pantallas táctiles',
                        'Reprogramación de interfaces',
                        'Desarrollo de pantallas personalizadas',
                        'Integración con sistemas SCADA/PLC',
                        'Migración a tecnologías modernas'
                    ],
                    recommendation: 'Podemos modernizar tus interfaces HMI obsoletas.'
                },
                'LADDER': {
                    title: 'Solución para Programación Ladder',
                    description: 'Optimización y mantenimiento de programas PLC:',
                    steps: [
                        'Auditoría de código ladder existente',
                        'Optimización de lógica de control',
                        'Documentación de programas',
                        'Implementación de buenas prácticas',
                        'Migración a nuevos controladores'
                    ],
                    recommendation: 'Mejora la eficiencia de tus programas PLC con nuestra ayuda.'
                },
                'IA': {
                    title: 'Solución para Machine Learning/IA',
                    description: 'Implementación de inteligencia artificial industrial:',
                    steps: [
                        'Análisis de datos de procesos',
                        'Desarrollo de modelos predictivos',
                        'Implementación de visión artificial',
                        'Optimización de procesos con IA',
                        'Integración con sistemas existentes'
                    ],
                    recommendation: 'Transforma tus procesos con nuestras soluciones de IA industrial.'
                },
                // NUEVAS SOLUCIONES PARA CONECTIVIDAD
                'RED-INDUSTRIAL': {
                    title: 'Solución para Problemas de Red Industrial',
                    description: 'Diagnóstico y solución completa de redes industriales:',
                    steps: [
                        'Análisis de topología de red industrial',
                        'Pruebas de switches y routers industriales',
                        'Verificación de VLANs y QoS',
                        'Optimización de parámetros de red',
                        'Implementación de redundancia (STP, RSTP)',
                        'Migración a redes industriales modernas'
                    ],
                    recommendation: 'Contacta a nuestro equipo de redes industriales para un diagnóstico completo.'
                },
                'WIRELESS': {
                    title: 'Solución para Conectividad Wireless Industrial',
                    description: 'Optimización de redes inalámbricas industriales:',
                    steps: [
                        'Estudio de cobertura y interferencias',
                        'Optimización de puntos de acceso',
                        'Configuración de seguridad industrial',
                        'Pruebas de roaming y handover',
                        'Implementación de mesh networks',
                        'Migración a Wi-Fi 6 Industrial'
                    ],
                    recommendation: 'Solicita nuestro estudio de cobertura wireless gratuito.'
                },
                'BUS-FIELD': {
                    title: 'Solución para Buses de Campo',
                    description: 'Diagnóstico y reparación de buses de campo:',
                    steps: [
                        'Pruebas de continuidad y terminación',
                        'Análisis de señales con osciloscopio',
                        'Configuración de maestros y esclavos',
                        'Optimización de velocidad y timing',
                        'Migración a buses modernos (Profinet, Ethernet/IP)',
                        'Implementación de gateways'
                    ],
                    recommendation: 'Nuestros técnicos certificados pueden resolver tus problemas de buses de campo.'
                },
                'FIBRA-OPTICA': {
                    title: 'Solución para Fibra Óptica Industrial',
                    description: 'Diagnóstico y reparación de enlaces de fibra óptica:',
                    steps: [
                        'Pruebas OTDR de fibra óptica',
                        'Reemplazo de conectores y empalmes',
                        'Verificación de potencia óptica',
                        'Implementación de redundancia óptica',
                        'Migración a fibras monomodo',
                        'Certificación de enlaces ópticos'
                    ],
                    recommendation: 'Contamos con equipo OTDR para diagnóstico preciso de fibra óptica.'
                },
                'COM-SERIAL': {
                    title: 'Solución para Comunicación Serial',
                    description: 'Diagnóstico y configuración de comunicación serial:',
                    steps: [
                        'Verificación de cables RS-232/RS-485',
                        'Configuración de parámetros seriales',
                        'Pruebas con analizadores seriales',
                        'Implementación de convertidores USB-serial',
                        'Migración a comunicación Ethernet',
                        'Optimización de protocolos seriales'
                    ],
                    recommendation: 'Nuestros técnicos especializados pueden resolver problemas de comunicación serial.'
                },
                'VPN-INDUSTRIAL': {
                    title: 'Solución para VPN Industrial',
                    description: 'Configuración y solución de problemas de VPN:',
                    steps: [
                        'Configuración de VPN site-to-site',
                        'Implementación de acceso remoto seguro',
                        'Pruebas de conectividad y rendimiento',
                        'Configuración de firewall industrial',
                        'Implementación de autenticación multifactor',
                        'Migración a VPNs modernas (WireGuard, OpenVPN)'
                    ],
                    recommendation: 'Protegemos tus conexiones remotas con VPNs industriales seguras.'
                },
                // NUEVAS SOLUCIONES PARA RENDIMIENTO
                'PLC-LENTO': {
                    title: 'Solución para PLC Lento',
                    description: 'Optimización de rendimiento de PLC:',
                    steps: [
                        'Análisis de tiempo de escaneo',
                        'Optimización de código ladder',
                        'Revisión de tareas e interrupciones',
                        'Actualización de firmware',
                        'Migración a PLCs más potentes',
                        'Implementación de programación estructurada'
                    ],
                    recommendation: 'Podemos optimizar tu programa PLC para mejorar el rendimiento hasta en un 50%.'
                },
                'SCADA-LENTO': {
                    title: 'Solución para SCADA Lento',
                    description: 'Optimización de sistemas SCADA:',
                    steps: [
                        'Análisis de bases de datos históricas',
                        'Optimización de consultas SQL',
                        'Configuración de compresión de datos',
                        'Implementación de clustering',
                        'Migración a arquitecturas modernas',
                        'Optimización de pantallas y scripts'
                    ],
                    recommendation: 'Nuestro equipo SCADA puede mejorar el rendimiento de tu sistema.'
                },
                'HMI-LENTA': {
                    title: 'Solución para HMI Lenta',
                    description: 'Mejora de rendimiento de interfaces:',
                    steps: [
                        'Optimización de gráficos y animaciones',
                        'Revisión de scripts y lógica',
                        'Actualización de hardware',
                        'Migración a HMI modernas',
                        'Implementación de caching',
                        'Optimización de comunicaciones'
                    ],
                    recommendation: 'Podemos modernizar tus interfaces HMI para mayor velocidad.'
                },
                'DATABASE-LENTA': {
                    title: 'Solución para Base de Datos Lenta',
                    description: 'Optimización de bases de datos industriales:',
                    steps: [
                        'Análisis de índices y consultas',
                        'Optimización de esquemas de base de datos',
                        'Implementación de particionamiento',
                        'Configuración de mantenimiento automático',
                        'Migración a bases de datos más eficientes',
                        'Implementación de replicación'
                    ],
                    recommendation: 'Nuestros DBA pueden optimizar tus bases de datos industriales.'
                },
                'COMUNICACION-LENTA': {
                    title: 'Solución para Comunicación Lenta',
                    description: 'Optimización de comunicaciones industriales:',
                    steps: [
                        'Análisis de tráfico de red',
                        'Optimización de protocolos de comunicación',
                        'Implementación de compresión de datos',
                        'Configuración de QoS (Calidad de Servicio)',
                        'Migración a protocolos más eficientes',
                        'Implementación de comunicación asíncrona'
                    ],
                    recommendation: 'Podemos acelerar tus comunicaciones industriales significativamente.'
                },
                'SERVER-LENTO': {
                    title: 'Solución para Servidor Lento',
                    description: 'Optimización de servidores industriales:',
                    steps: [
                        'Análisis de recursos (CPU, RAM, disco)',
                        'Optimización de sistemas operativos',
                        'Implementación de virtualización',
                        'Migración a hardware más potente',
                        'Configuración de balanceo de carga',
                        'Implementación de alta disponibilidad'
                    ],
                    recommendation: 'Podemos hacer que tus servidores industriales vuelvan a ser rápidos.'
                }
            };
            
            const solution = solutions[problemType] || {
                title: 'Solución Personalizada',
                description: 'Nuestros ingenieros analizarán tu caso específico.',
                steps: ['Análisis detallado del problema', 'Propuesta de solución técnica', 'Cotización personalizada'],
                recommendation: 'Contáctanos para una evaluación gratuita.'
            };
            
            const lang = TranslationSystem.getCurrentLang();
            const solutionTitle = lang === 'es' ? 
                `Solución para ${problemType}` : 
                `Solution for ${problemType}`;
            
            const solutionHTML = `
                <div class="diagnostic-step active" id="solution-${problemType}">
                    <button class="btn" onclick="goBackToStep1()" style="margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> ${TranslationSystem.translate('back-button')}
                    </button>
                    
                    <div style="background: #f8f9fa; padding: 2rem; border-radius: 15px; margin: 1rem 0;">
                        <h3 style="color: #091827; margin-bottom: 1rem;">${solutionTitle}</h3>
                        <p style="margin-bottom: 1.5rem;">${solution.description}</p>
                        
                        <h4 style="color: #1a365d; margin-bottom: 1rem;">${TranslationSystem.translate('our-approach')}</h4>
                        <ul style="margin-bottom: 1.5rem; padding-left: 1.5rem;">
                            ${solution.steps.map(step => `<li style="margin-bottom: 0.5rem;">${step}</li>`).join('')}
                        </ul>
                        
                        <div style="background: white; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #3cba54;">
                            <h5 style="color: #3cba54; margin-bottom: 0.5rem;"><i class="fas fa-lightbulb"></i> ${TranslationSystem.translate('recommendation')}</h5>
                            <p>${solution.recommendation}</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="btn" onclick="goBackToStep1()">
                            <i class="fas fa-redo"></i> ${TranslationSystem.translate('diagnose-another')}
                        </button>
                        <button class="btn" onclick="showContactForm()" style="background: #3cba54;">
                            <i class="fas fa-headset"></i> ${TranslationSystem.translate('contact-specialist')}
                        </button>
                    </div>
                </div>
            `;
            
            // Ocultar submenús actuales
            const submenus = document.querySelectorAll('.diagnostic-step:not(#step-1)');
            submenus.forEach(submenu => {
                submenu.remove();
            });
            
            // Mostrar solución
            const diagnosticTool = document.querySelector('.diagnostic-tool');
            diagnosticTool.insertAdjacentHTML('beforeend', solutionHTML);
        }

        function showContactForm() {
            // Desplazarse a la sección de contacto
            document.getElementById('contacto').scrollIntoView({ behavior: 'smooth' });
            
            // Opcional: pre-llenar el formulario con información del diagnóstico
            const nameField = document.getElementById('name');
            if (nameField) {
                nameField.focus();
            }
        }

        // ============================================
        // SISTEMA DE ACCESO SECRETO AL PANEL DE CONTROL (MODIFICADO)
        // ============================================
        const SecretAccessSystem = (function() {
            let keySequence = [];
            // NUEVO CÓDIGO SECRETO: Rimisa01. (el punto final es parte del código)
            const secretCode = ['R', 'i', 'm', 'i', 's', 'a', '0', '1', '.'];
            
            function init() {
                document.addEventListener('keydown', handleKeyPress);
                console.log('✅ Sistema de acceso secreto activado. Código: Rimisa01.');
            }
            
            function handleKeyPress(e) {
                // Solo procesar teclas alfanuméricas y el punto
                if (e.key.length === 1 || e.key === '.') {
                    keySequence.push(e.key);
                    
                    // Mantener solo los últimos 9 caracteres
                    if (keySequence.length > secretCode.length) {
                        keySequence.shift();
                    }
                    
                    // Verificar si coincide con el código secreto
                    if (keySequence.join('') === secretCode.join('')) {
                        // Acceso concedido
                        activateAdminAccess();
                        keySequence = [];
                    }
                }
            }
            
            function activateAdminAccess() {
                // Mostrar mensaje de acceso
                alert('🚀 Acceso de administrador activado!\nEl panel de control estará disponible por 5 minutos.');
                
                // Mostrar el botón de administración
                const adminPanel = document.getElementById('admin-panel');
                if (adminPanel) {
                    adminPanel.style.display = 'flex';
                    
                    // Ocultar después de 5 minutos
                    setTimeout(() => {
                        adminPanel.style.display = 'none';
                        alert('⏰ El acceso de administrador ha expirado.');
                    }, 5 * 60 * 1000);
                }
                
                // Guardar sesión activa
                sessionStorage.setItem('mitronixs_admin_active', 'true');
                sessionStorage.setItem('mitronixs_admin_expiry', Date.now() + (5 * 60 * 1000));
            }
            
            function checkAdminSession() {
                const isActive = sessionStorage.getItem('mitronixs_admin_active');
                const expiry = sessionStorage.getItem('mitronixs_admin_expiry');
                
                if (isActive && expiry && Date.now() < parseInt(expiry)) {
                    const adminPanel = document.getElementById('admin-panel');
                    if (adminPanel) {
                        adminPanel.style.display = 'flex';
                    }
                }
            }
            
            return {
                init,
                checkAdminSession
            };
        })();

        // ============================================
        // SISTEMA DE TRADUCCIÓN COMPLETO CON LISTENERS (ACTUALIZADO)
        // ============================================
        const TranslationSystem = (function() {
            // Diccionarios de traducción
            const translations = {
                es: {
                    // Navegación
                    'inicio': 'Inicio',
                    'servicios': 'Servicios',
                    'nosotros': 'Nosotros',
                    'ubicacion': 'Ubicación',
                    'contacto': 'Contacto',
                    
                    // Hero section
                    'hero-title': 'Soluciones de Automatización, Cómputo Industrial y Programación Avanzada',
                    'hero-text': 'Expertos en ingeniería, sistemas electrónicos de control, cómputo industrial, robótica, desarrollo web y machine learning',
                    'contact-us': 'Contáctanos',
                    'calculate-savings': 'Calcular Ahorro con Automatización',
                    
                    // Calculadora ROI
                    'roi-calculator': 'Calculadora de ROI para Automatización',
                    'current-operators': 'Número de operarios actuales:',
                    'daily-hours': 'Horas de trabajo diarias:',
                    'monthly-days': 'Días trabajados por mes:',
                    'average-salary': 'Salario promedio por operario (MXN):',
                    'calculate-savings-btn': 'Calcular Ahorro',
                    'analysis-result': 'Resultado del Análisis:',
                    
                    // Servicios - Diagnosticador (ESPAÑOL COMPLETO)
                    'services-title': 'Nuestros Servicios',
                    'diagnostic-tool': 'Diagnosticador Inteligente de Problemas',
                    'select-problem': 'Selecciona el tipo de problema que estás experimentando:',
                    'connectivity': 'Problemas de Conectividad',
                    'connectivity-desc': 'Redes, comunicación, buses de campo',
                    'performance': 'Bajo Rendimiento',
                    'performance-desc': 'Sistemas lentos, respuesta ineficiente',
                    'automation': 'Automatización',
                    'automation-desc': 'PLC, SCADA, sensores, actuadores',
                    'computo': 'Cómputo Industrial',
                    'computo-desc': 'Servidores, redes, HMI, sistemas embebidos',
                    'telecomunicaciones': 'Programación Avanzada',
                    'programming-desc': 'Ladder, SCADA, web, machine learning',
                    
                    // Submenús del Diagnosticador (ESPAÑOL)
                    'problems-connectivity': 'Problemas de Conectividad',
                    'problems-performance': 'Bajo Rendimiento',
                    'problems-automation': 'Problemas de Automatización',
                    'problems-computing': 'Problemas de Cómputo Industrial',
                    'problems-programming': 'Problemas de Programación',
                    'back-button': 'Volver',
                    
                    // Submenú de Conectividad (ESPAÑOL)
                    'industrial-network': 'Red Industrial',
                    'industrial-network-desc': 'Problemas en redes Ethernet industrial, switches y routers',
                    'wireless-connectivity': 'Conectividad Wireless',
                    'wireless-desc': 'Fallos en Wi-Fi industrial, antenas y puntos de acceso',
                    'field-buses': 'Buses de Campo',
                    'field-buses-desc': 'Problemas con Profibus, Modbus, DeviceNet, etc.',
                    'fiber-optic': 'Fibra Óptica',
                    'fiber-optic-desc': 'Fallos en enlaces de fibra óptica y convertidores',
                    'serial-com': 'Comunicación Serial',
                    'serial-com-desc': 'Problemas con RS-232, RS-485, comunicación punto a punto',
                    'industrial-vpn': 'VPN Industrial',
                    'industrial-vpn-desc': 'Fallos en conexiones VPN para acceso remoto seguro',
                    
                    // Submenú de Rendimiento (ESPAÑOL)
                    'slow-plc': 'PLC Lento',
                    'slow-plc-desc': 'Procesamiento lento, escaneo de programa muy largo',
                    'slow-scada': 'SCADA Lento',
                    'slow-scada-desc': 'Pantallas que cargan lento, datos históricos lentos',
                    'slow-hmi': 'HMI Lenta',
                    'slow-hmi-desc': 'Interfaces de operador con respuesta lenta',
                    'slow-database': 'Base de Datos Lenta',
                    'slow-database-desc': 'Consultas lentas, almacenamiento histórico ineficiente',
                    'slow-communication': 'Comunicación Lenta',
                    'slow-communication-desc': 'Transferencia de datos lenta entre dispositivos',
                    'slow-server': 'Servidor Lento',
                    'slow-server-desc': 'Servidores industriales con bajo rendimiento',
                    
                    // Submenú de Automatización (ESPAÑOL)
                    'plc-failures': 'Fallas en PLC',
                    'plc-failures-desc': 'Problemas con controladores lógicos programables',
                    'scada-systems': 'Sistemas SCADA',
                    'scada-systems-desc': 'Fallos en supervisión y control de procesos',
                    'sensors-actuators': 'Sensores y Actuadores',
                    'sensors-desc': 'Mala lectura o respuesta de dispositivos',
                    'industrial-com': 'Comunicación Industrial',
                    'industrial-com-desc': 'Problemas con buses de campo (Profibus, Modbus, etc.)',
                    
                    // Submenú de Cómputo (ESPAÑOL)
                    'industrial-servers': 'Servidores Industriales',
                    'servers-desc': 'Fallos en servidores, racks o sistemas de almacenamiento',
                    'industrial-networks': 'Redes Industriales',
                    'industrial-networks-desc': 'Problemas de conectividad en red de planta',
                    'hmi-interfaces': 'Interfaces HMI',
                    'hmi-interfaces-desc': 'Pantallas táctiles o interfaces de operador defectuosas',
                    'embedded-systems': 'Sistemas Embebidos',
                    'embedded-desc': 'Problemas con sistemas de control integrados',
                    
                    // Submenú de Programación (ESPAÑOL)
                    'ladder-programming': 'Programación Ladder',
                    'ladder-desc': 'Errores en lógica de programación PLC',
                    'scada-programming': 'Programación SCADA',
                    'scada-prog-desc': 'Problemas en scripts o configuración SCADA',
                    'web-development': 'Desarrollo Web Industrial',
                    'web-dev-desc': 'Aplicaciones web para monitoreo y control',
                    'ai-ml': 'Machine Learning / IA',
                    'ai-ml-desc': 'Implementación de algoritmos inteligentes',
                    
                    // Mensajes de solución (ESPAÑOL)
                    'solution-for': 'Solución para',
                    'our-approach': 'Nuestro Enfoque:',
                    'recommendation': 'Recomendación',
                    'diagnose-another': 'Diagnosticar otro problema',
                    'contact-specialist': 'Contactar Especialista',
                    
                    // Servicios de tarjetas
                    'electrodomesticos': 'Sistemas Electrónicos de Control',
                    'electrodomesticos-desc': 'Diseño, implementación y mantenimiento de sistemas electrónicos de control automatizados con tecnología de punta y personal calificado.',
                    'computo-desc': 'Soluciones integrales en hardware y software para equipos de cómputo industrial, desde servidores hasta sistemas embebidos.',
                    'telecomunicaciones-desc': 'Desarrollo de software especializado, desde aplicaciones web hasta sistemas con machine learning e inteligencia artificial.',
                    'robotica': 'Robótica Industrial',
                    'robotica-desc': 'Diseño, programación y mantenimiento de sistemas robóticos para aplicaciones industriales avanzadas.',
                    'from-price': 'Desde',
                    'add-to-cart': 'Agregar al carrito',
                    
                    // Nosotros
                    'about-title': 'Sobre Nosotros',
                    'about-text1': 'Mitronixs es una empresa con sede en Providencia, Guadalajara Jalisco, especializada en servicios de ingeniería de alta calidad. Contamos con más de 10 años de experiencia en el sector tecnológico.',
                    'about-text2': 'Nuestro equipo de ingenieros y desarrolladores altamente capacitados está comprometido con brindar soluciones eficientes e innovadoras para todas las necesidades tecnológicas de nuestros clientes.',
                    'about-text3': 'Trabajamos con los más altos estándares de calidad y utilizamos tecnología de punta para garantizar la satisfacción total de nuestros clientes.',
                    'calculate-savings-about': 'Calcular Ahorro con Nuestras Soluciones',
                    
                    // Ubicación
                    'location-title': 'Nuestra Ubicación',
                    'location-text': 'Visítanos en nuestra oficina en Providencia, Guadalajara Jalisco',
                    
                    // Contacto
                    'contact-title': 'Contáctanos',
                    'contact-text': 'Estamos para servirte. Ponte en contacto con nosotros para cualquier consulta o solicitud de servicio.',
                    'name': 'Nombre',
                    'name-placeholder': 'Tu nombre completo',
                    'email': 'Correo electrónico',
                    'email-placeholder': 'Correo@servidor.com',
                    'phone': 'Teléfono',
                    'phone-placeholder': '+52 33 1234 5678',
                    'message': 'Mensaje',
                    'message-placeholder': 'Describe tu consulta o necesidad',
                    'send-message': 'Enviar Mensaje',
                    
                    // Footer
                    'footer': 'Mitronixs SAS de CV © 2025 - Todos los derechos reservados',
                    'footer-location': 'Providencia, Guadalajara Jalisco, México',
                    
                    // Carrito
                    'cart': 'Tu Carrito de Servicios',
                    'total': 'Total estimado:'
                },
                
                en: {
                    // Navigation
                    'inicio': 'Home',
                    'servicios': 'Services',
                    'nosotros': 'About Us',
                    'ubicacion': 'Location',
                    'contacto': 'Contact',
                    
                    // Hero section
                    'hero-title': 'Automation, Industrial Computing and Advanced Programming Solutions',
                    'hero-text': 'Experts in engineering, electronic control systems, industrial computing, robotics, web development and machine learning',
                    'contact-us': 'Contact Us',
                    'calculate-savings': 'Calculate Savings with Automation',
                    
                    // ROI Calculator
                    'roi-calculator': 'ROI Calculator for Automation',
                    'current-operators': 'Current number of operators:',
                    'daily-hours': 'Daily working hours:',
                    'monthly-days': 'Working days per month:',
                    'average-salary': 'Average salary per operator (MXN):',
                    'calculate-savings-btn': 'Calculate Savings',
                    'analysis-result': 'Analysis Result:',
                    
                    // Services - Diagnostic Tool (ENGLISH COMPLETE)
                    'services-title': 'Our Services',
                    'diagnostic-tool': 'Intelligent Problem Diagnostic Tool',
                    'select-problem': 'Select the type of problem you are experiencing:',
                    'connectivity': 'Connectivity Issues',
                    'connectivity-desc': 'Networks, communication, field buses',
                    'performance': 'Low Performance',
                    'performance-desc': 'Slow systems, inefficient response',
                    'automation': 'Automation',
                    'automation-desc': 'PLC, SCADA, sensors, actuators',
                    'computo': 'Industrial Computing',
                    'computo-desc': 'Servers, networks, HMI, embedded systems',
                    'telecomunicaciones': 'Advanced Programming',
                    'programming-desc': 'Ladder, SCADA, web, machine learning',
                    
                    // Diagnostic Submenus (ENGLISH)
                    'problems-connectivity': 'Connectivity Problems',
                    'problems-performance': 'Low Performance',
                    'problems-automation': 'Automation Problems',
                    'problems-computing': 'Industrial Computing Problems',
                    'problems-programming': 'Programming Problems',
                    'back-button': 'Back',
                    
                    // Connectivity Submenu (ENGLISH)
                    'industrial-network': 'Industrial Network',
                    'industrial-network-desc': 'Problems in industrial Ethernet networks, switches and routers',
                    'wireless-connectivity': 'Wireless Connectivity',
                    'wireless-desc': 'Failures in industrial Wi-Fi, antennas and access points',
                    'field-buses': 'Field Buses',
                    'field-buses-desc': 'Problems with Profibus, Modbus, DeviceNet, etc.',
                    'fiber-optic': 'Fiber Optic',
                    'fiber-optic-desc': 'Failures in fiber optic links and converters',
                    'serial-com': 'Serial Communication',
                    'serial-com-desc': 'Problems with RS-232, RS-485, point-to-point communication',
                    'industrial-vpn': 'Industrial VPN',
                    'industrial-vpn-desc': 'Failures in VPN connections for secure remote access',
                    
                    // Performance Submenu (ENGLISH)
                    'slow-plc': 'Slow PLC',
                    'slow-plc-desc': 'Slow processing, very long program scan',
                    'slow-scada': 'Slow SCADA',
                    'slow-scada-desc': 'Slow loading screens, slow historical data',
                    'slow-hmi': 'Slow HMI',
                    'slow-hmi-desc': 'Operator interfaces with slow response',
                    'slow-database': 'Slow Database',
                    'slow-database-desc': 'Slow queries, inefficient historical storage',
                    'slow-communication': 'Slow Communication',
                    'slow-communication-desc': 'Slow data transfer between devices',
                    'slow-server': 'Slow Server',
                    'slow-server-desc': 'Industrial servers with low performance',
                    
                    // Automation Submenu (ENGLISH)
                    'plc-failures': 'PLC Failures',
                    'plc-failures-desc': 'Problems with programmable logic controllers',
                    'scada-systems': 'SCADA Systems',
                    'scada-systems-desc': 'Failures in supervision and process control',
                    'sensors-actuators': 'Sensors and Actuators',
                    'sensors-desc': 'Poor reading or response from devices',
                    'industrial-com': 'Industrial Communication',
                    'industrial-com-desc': 'Problems with field buses (Profibus, Modbus, etc.)',
                    
                    // Computing Submenu (ENGLISH)
                    'industrial-servers': 'Industrial Servers',
                    'servers-desc': 'Failures in servers, racks or storage systems',
                    'industrial-networks': 'Industrial Networks',
                    'industrial-networks-desc': 'Connectivity problems in plant network',
                    'hmi-interfaces': 'HMI Interfaces',
                    'hmi-interfaces-desc': 'Touch screens or defective operator interfaces',
                    'embedded-systems': 'Embedded Systems',
                    'embedded-desc': 'Problems with integrated control systems',
                    
                    // Programming Submenu (ENGLISH)
                    'ladder-programming': 'Ladder Programming',
                    'ladder-desc': 'Errors in PLC programming logic',
                    'scada-programming': 'SCADA Programming',
                    'scada-prog-desc': 'Problems in scripts or SCADA configuration',
                    'web-development': 'Industrial Web Development',
                    'web-dev-desc': 'Web applications for monitoring and control',
                    'ai-ml': 'Machine Learning / AI',
                    'ai-ml-desc': 'Implementation of intelligent algorithms',
                    
                    // Solution Messages (ENGLISH)
                    'solution-for': 'Solution for',
                    'our-approach': 'Our Approach:',
                    'recommendation': 'Recommendation',
                    'diagnose-another': 'Diagnose Another Problem',
                    'contact-specialist': 'Contact Specialist',
                    
                    // Service cards
                    'electrodomesticos': 'Electronic Control Systems',
                    'electrodomesticos-desc': 'Design, implementation and maintenance of automated electronic control systems with cutting-edge technology and qualified personnel.',
                    'computo-desc': 'Comprehensive hardware and software solutions for industrial computing equipment, from servers to embedded systems.',
                    'telecomunicaciones-desc': 'Specialized software development, from web applications to systems with machine learning and artificial intelligence.',
                    'robotica': 'Industrial Robotics',
                    'robotica-desc': 'Design, programming and maintenance of robotic systems for advanced industrial applications.',
                    'from-price': 'From',
                    'add-to-cart': 'Add to Cart',
                    
                    // About Us
                    'about-title': 'About Us',
                    'about-text1': 'Mitronixs is a company based in Providencia, Guadalajara Jalisco, specializing in high-quality engineering services. We have over 10 years of experience in the technology sector.',
                    'about-text2': 'Our team of highly trained engineers and developers is committed to providing efficient and innovative solutions for all our clients\' technological needs.',
                    'about-text3': 'We work with the highest quality standards and use cutting-edge technology to ensure total customer satisfaction.',
                    'calculate-savings-about': 'Calculate Savings with Our Solutions',
                    
                    // Location
                    'location-title': 'Our Location',
                    'location-text': 'Visit us at our office in Providencia, Guadalajara Jalisco',
                    
                    // Contact
                    'contact-title': 'Contact Us',
                    'contact-text': 'We are here to serve you. Contact us for any inquiry or service request.',
                    'name': 'Name',
                    'name-placeholder': 'Your full name',
                    'email': 'Email',
                    'email-placeholder': 'email@server.com',
                    'phone': 'Phone',
                    'phone-placeholder': '+52 33 1234 5678',
                    'message': 'Message',
                    'message-placeholder': 'Describe your inquiry or need',
                    'send-message': 'Send Message',
                    
                    // Footer
                    'footer': 'Mitronixs SAS de CV © 2025 - All rights reserved',
                    'footer-location': 'Providencia, Guadalajara Jalisco, Mexico',
                    
                    // Cart
                    'cart': 'Your Services Cart',
                    'total': 'Estimated total:'
                }
            };
            
            let currentLang = 'es';
            let languageChangeListeners = [];
            
            // Función para traducir texto
            function translate(key, lang = currentLang) {
                const langDict = translations[lang] || translations['es'];
                return langDict[key] || key;
            }
            
            // Función para cambiar idioma
            function changeLanguage(lang) {
                if (!translations[lang]) {
                    console.error(`Language ${lang} not supported`);
                    return;
                }
                
                currentLang = lang;
                
                // Actualizar botón de idioma
                const langButton = document.getElementById('language-toggle');
                if (langButton) {
                    langButton.innerHTML = `<i class="fas fa-globe"></i> ${lang.toUpperCase()}`;
                }
                
                // Actualizar todos los elementos con data-key
                document.querySelectorAll('[data-key]').forEach(element => {
                    const key = element.getAttribute('data-key');
                    const translation = translate(key, lang);
                    
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translation;
                    } else if (element.tagName === 'BUTTON' || element.tagName === 'A') {
                        element.textContent = translation;
                    } else {
                        element.textContent = translation;
                    }
                });
                
                // Actualizar eslogan
                const spanishSlogan = document.querySelector('.slogan.es');
                const englishSlogan = document.querySelector('.slogan.en');
                
                if (spanishSlogan && englishSlogan) {
                    if (lang === 'es') {
                        spanishSlogan.classList.add('active');
                        englishSlogan.classList.remove('active');
                    } else {
                        spanishSlogan.classList.remove('active');
                        englishSlogan.classList.add('active');
                    }
                }
                
                // Actualizar contenido dinámico del diagnosticador
                updateDiagnosticContent(lang);
                
                // Guardar preferencia en localStorage
                localStorage.setItem('mitronixs_language', lang);
                
                // Actualizar resultados de la calculadora si están visibles
                updateCalculatorResults(lang);
                
                // Notificar a los listeners
                languageChangeListeners.forEach(listener => {
                    try {
                        listener(lang);
                    } catch (e) {
                        console.error('Error en listener de cambio de idioma:', e);
                    }
                });
                
                console.log(`✅ Idioma cambiado a: ${lang}`);
            }
            
            // Función para actualizar contenido del diagnosticador
            function updateDiagnosticContent(lang) {
                const diagnosticTool = document.querySelector('.diagnostic-tool');
                if (!diagnosticTool) return;
                
                // Actualizar títulos principales
                const titles = diagnosticTool.querySelectorAll('h3, h4, p');
                titles.forEach(title => {
                    if (title.textContent.includes('Diagnosticador') || 
                        title.textContent.includes('Intelligent Problem')) {
                        title.textContent = translate('diagnostic-tool', lang);
                    } else if (title.textContent.includes('Selecciona') || 
                               title.textContent.includes('Select the type')) {
                        title.textContent = translate('select-problem', lang);
                    }
                });
                
                // Actualizar tarjetas de opciones
                const optionCards = diagnosticTool.querySelectorAll('.option-card');
                if (optionCards.length > 0) {
                    optionCards.forEach((card, index) => {
                        const h4 = card.querySelector('h4');
                        const p = card.querySelector('p');
                        
                        if (h4 && p) {
                            switch(index) {
                                case 0: // Conectividad
                                    h4.textContent = translate('connectivity', lang);
                                    p.textContent = translate('connectivity-desc', lang);
                                    break;
                                case 1: // Rendimiento
                                    h4.textContent = translate('performance', lang);
                                    p.textContent = translate('performance-desc', lang);
                                    break;
                                case 2: // Automatización
                                    h4.textContent = translate('automation', lang);
                                    p.textContent = translate('automation-desc', lang);
                                    break;
                                case 3: // Cómputo
                                    h4.textContent = translate('computo', lang);
                                    p.textContent = translate('computo-desc', lang);
                                    break;
                                case 4: // Programación
                                    h4.textContent = translate('telecomunicaciones', lang);
                                    p.textContent = translate('programming-desc', lang);
                                    break;
                            }
                        }
                    });
                }
                
                // Actualizar submenús si están visibles
                updateSubmenus(lang);
            }
            
            // Función para actualizar submenús
            function updateSubmenus(lang) {
                const submenus = document.querySelectorAll('.submenu-grid');
                submenus.forEach(submenu => {
                    const submenuTitle = submenu.previousElementSibling;
                    if (submenuTitle && submenuTitle.tagName === 'H4') {
                        if (submenuTitle.textContent.includes('Problemas de Conectividad') || 
                            submenuTitle.textContent.includes('Connectivity Problems')) {
                            submenuTitle.textContent = translate('problems-connectivity', lang);
                        } else if (submenuTitle.textContent.includes('Bajo Rendimiento') || 
                                   submenuTitle.textContent.includes('Low Performance')) {
                            submenuTitle.textContent = translate('problems-performance', lang);
                        } else if (submenuTitle.textContent.includes('Problemas de Automatización') || 
                                   submenuTitle.textContent.includes('Automation Problems')) {
                            submenuTitle.textContent = translate('problems-automation', lang);
                        } else if (submenuTitle.textContent.includes('Problemas de Cómputo') || 
                                   submenuTitle.textContent.includes('Industrial Computing')) {
                            submenuTitle.textContent = translate('problems-computing', lang);
                        } else if (submenuTitle.textContent.includes('Problemas de Programación') || 
                                   submenuTitle.textContent.includes('Programming Problems')) {
                            submenuTitle.textContent = translate('problems-programming', lang);
                        }
                    }
                    
                    // Actualizar tarjetas de submenú
                    const submenuCards = submenu.querySelectorAll('.submenu-card');
                    submenuCards.forEach(card => {
                        const h4 = card.querySelector('h4');
                        const p = card.querySelector('p');
                        
                        if (h4 && p) {
                            const cardTitle = h4.textContent.trim();
                            
                            // Buscar traducción para el título
                            const translatedTitle = translateCardTitle(cardTitle, lang);
                            if (translatedTitle) {
                                h4.textContent = translatedTitle;
                            }
                            
                            // Actualizar descripción basada en el título
                            updateCardDescription(h4.textContent, p, lang);
                        }
                    });
                    
                    // Actualizar botones de volver
                    const backButton = submenu.parentElement.querySelector('button.btn');
                    if (backButton) {
                        const buttonText = backButton.textContent.trim();
                        if (buttonText.includes('Volver') || buttonText.includes('Back')) {
                            backButton.innerHTML = `<i class="fas fa-arrow-left"></i> ${translate('back-button', lang)}`;
                        }
                    }
                });
                
                // Actualizar mensajes de solución
                updateSolutionMessages(lang);
            }
            
            // Función auxiliar para traducir títulos de tarjetas
            function translateCardTitle(title, lang) {
                const titleMap = {
                    'es': {
                        'Red Industrial': 'industrial-network',
                        'Conectividad Wireless': 'wireless-connectivity',
                        'Buses de Campo': 'field-buses',
                        'Fibra Óptica': 'fiber-optic',
                        'Comunicación Serial': 'serial-com',
                        'VPN Industrial': 'industrial-vpn',
                        'PLC Lento': 'slow-plc',
                        'SCADA Lento': 'slow-scada',
                        'HMI Lenta': 'slow-hmi',
                        'Base de Datos Lenta': 'slow-database',
                        'Comunicación Lenta': 'slow-communication',
                        'Servidor Lento': 'slow-server',
                        'Fallas en PLC': 'plc-failures',
                        'Sistemas SCADA': 'scada-systems',
                        'Sensores y Actuadores': 'sensors-actuators',
                        'Comunicación Industrial': 'industrial-com',
                        'Servidores Industriales': 'industrial-servers',
                        'Redes Industriales': 'industrial-networks',
                        'Interfaces HMI': 'hmi-interfaces',
                        'Sistemas Embebidos': 'embedded-systems',
                        'Programación Ladder': 'ladder-programming',
                        'Programación SCADA': 'scada-programming',
                        'Desarrollo Web Industrial': 'web-development',
                        'Machine Learning / IA': 'ai-ml'
                    },
                    'en': {
                        'Industrial Network': 'industrial-network',
                        'Wireless Connectivity': 'wireless-connectivity',
                        'Field Buses': 'field-buses',
                        'Fiber Optic': 'fiber-optic',
                        'Serial Communication': 'serial-com',
                        'Industrial VPN': 'industrial-vpn',
                        'Slow PLC': 'slow-plc',
                        'Slow SCADA': 'slow-scada',
                        'Slow HMI': 'slow-hmi',
                        'Slow Database': 'slow-database',
                        'Slow Communication': 'slow-communication',
                        'Slow Server': 'slow-server',
                        'PLC Failures': 'plc-failures',
                        'SCADA Systems': 'scada-systems',
                        'Sensors and Actuators': 'sensors-actuators',
                        'Industrial Communication': 'industrial-com',
                        'Industrial Servers': 'industrial-servers',
                        'Industrial Networks': 'industrial-networks',
                        'HMI Interfaces': 'hmi-interfaces',
                        'Embedded Systems': 'embedded-systems',
                        'Ladder Programming': 'ladder-programming',
                        'SCADA Programming': 'scada-programming',
                        'Industrial Web Development': 'web-development',
                        'Machine Learning / AI': 'ai-ml'
                    }
                };
                
                if (titleMap[lang] && titleMap[lang][title]) {
                    return translate(titleMap[lang][title], lang);
                }
                return null;
            }
            
            // Función para actualizar descripciones de tarjetas
            function updateCardDescription(cardTitle, pElement, lang) {
                const descMap = {
                    'es': {
                        'Red Industrial': 'Problemas en redes Ethernet industrial, switches y routers',
                        'Conectividad Wireless': 'Fallos en Wi-Fi industrial, antenas y puntos de acceso',
                        'Buses de Campo': 'Problemas con Profibus, Modbus, DeviceNet, etc.',
                        'Fibra Óptica': 'Fallos en enlaces de fibra óptica y convertidores',
                        'Comunicación Serial': 'Problemas con RS-232, RS-485, comunicación punto a punto',
                        'VPN Industrial': 'Fallos en conexiones VPN para acceso remoto seguro',
                        'PLC Lento': 'Procesamiento lento, escaneo de programa muy largo',
                        'SCADA Lento': 'Pantallas que cargan lento, datos históricos lentos',
                        'HMI Lenta': 'Interfaces de operador con respuesta lenta',
                        'Base de Datos Lenta': 'Consultas lentas, almacenamiento histórico ineficiente',
                        'Comunicación Lenta': 'Transferencia de datos lenta entre dispositivos',
                        'Servidor Lento': 'Servidores industriales con bajo rendimiento',
                        'Fallas en PLC': 'Problemas con controladores lógicos programables',
                        'Sistemas SCADA': 'Fallos en supervisión y control de procesos',
                        'Sensores y Actuadores': 'Mala lectura o respuesta de dispositivos',
                        'Comunicación Industrial': 'Problemas con buses de campo (Profibus, Modbus, etc.)',
                        'Servidores Industriales': 'Fallos en servidores, racks o sistemas de almacenamiento',
                        'Redes Industriales': 'Problemas de conectividad en red de planta',
                        'Interfaces HMI': 'Pantallas táctiles o interfaces de operador defectuosas',
                        'Sistemas Embebidos': 'Problemas con sistemas de control integrados',
                        'Programación Ladder': 'Errores en lógica de programación PLC',
                        'Programación SCADA': 'Problemas en scripts o configuración SCADA',
                        'Desarrollo Web Industrial': 'Aplicaciones web para monitoreo y control',
                        'Machine Learning / IA': 'Implementación de algoritmos inteligentes'
                    },
                    'en': {
                        'Industrial Network': 'Problems in industrial Ethernet networks, switches and routers',
                        'Wireless Connectivity': 'Failures in industrial Wi-Fi, antennas and access points',
                        'Field Buses': 'Problems with Profibus, Modbus, DeviceNet, etc.',
                        'Fiber Optic': 'Failures in fiber optic links and converters',
                        'Serial Communication': 'Problems with RS-232, RS-485, point-to-point communication',
                        'Industrial VPN': 'Failures in VPN connections for secure remote access',
                        'Slow PLC': 'Slow processing, very long program scan',
                        'Slow SCADA': 'Slow loading screens, slow historical data',
                        'Slow HMI': 'Operator interfaces with slow response',
                        'Slow Database': 'Slow queries, inefficient historical storage',
                        'Slow Communication': 'Slow data transfer between devices',
                        'Slow Server': 'Industrial servers with low performance',
                        'PLC Failures': 'Problems with programmable logic controllers',
                        'SCADA Systems': 'Failures in supervision and process control',
                        'Sensors and Actuators': 'Poor reading or response from devices',
                        'Industrial Communication': 'Problems with field buses (Profibus, Modbus, etc.)',
                        'Industrial Servers': 'Failures in servers, racks or storage systems',
                        'Industrial Networks': 'Connectivity problems in plant network',
                        'HMI Interfaces': 'Touch screens or defective operator interfaces',
                        'Embedded Systems': 'Problems with integrated control systems',
                        'Ladder Programming': 'Errors in PLC programming logic',
                        'SCADA Programming': 'Problems in scripts or SCADA configuration',
                        'Industrial Web Development': 'Web applications for monitoring and control',
                        'Machine Learning / AI': 'Implementation of intelligent algorithms'
                    }
                };
                
                if (descMap[lang] && descMap[lang][cardTitle]) {
                    pElement.textContent = descMap[lang][cardTitle];
                }
            }
            
            // Función para actualizar mensajes de solución
            function updateSolutionMessages(lang) {
                const solutionSections = document.querySelectorAll('.diagnostic-step.active');
                solutionSections.forEach(section => {
                    // Actualizar títulos de solución
                    const h3 = section.querySelector('h3');
                    if (h3 && h3.textContent.includes('Solución para')) {
                        const problemType = h3.textContent.replace('Solución para ', '').replace('Solution for ', '');
                        h3.textContent = `${translate('solution-for', lang)} ${problemType}`;
                    }
                    
                    // Actualizar subtítulos
                    const h4 = section.querySelector('h4');
                    if (h4 && (h4.textContent.includes('Nuestro Enfoque') || h4.textContent.includes('Our Approach'))) {
                        h4.textContent = translate('our-approach', lang);
                    }
                    
                    // Actualizar recomendación
                    const recTitle = section.querySelector('h5');
                    if (recTitle && (recTitle.textContent.includes('Recomendación') || recTitle.textContent.includes('Recommendation'))) {
                        recTitle.innerHTML = `<i class="fas fa-lightbulb"></i> ${translate('recommendation', lang)}`;
                    }
                    
                    // Actualizar botones
                    const buttons = section.querySelectorAll('button.btn');
                    buttons.forEach(button => {
                        const buttonText = button.textContent.trim();
                        if (buttonText.includes('Diagnosticar otro problema') || buttonText.includes('Diagnose Another Problem')) {
                            button.innerHTML = `<i class="fas fa-redo"></i> ${translate('diagnose-another', lang)}`;
                        } else if (buttonText.includes('Contactar Especialista') || buttonText.includes('Contact Specialist')) {
                            button.innerHTML = `<i class="fas fa-headset"></i> ${translate('contact-specialist', lang)}`;
                        }
                    });
                });
            }
            
            // Actualizar resultados de la calculadora
            function updateCalculatorResults(lang) {
                const roiResult = document.getElementById('roi-result');
                if (roiResult && roiResult.style.display === 'block') {
                    // Recalcular y actualizar en el idioma correcto
                    calcularROI();
                }
            }
            
            // Cargar idioma guardado
            function loadSavedLanguage() {
                const savedLang = localStorage.getItem('mitronixs_language');
                if (savedLang && translations[savedLang]) {
                    currentLang = savedLang;
                    changeLanguage(savedLang);
                }
            }
            
            // Agregar listener para cambios de idioma
            function addLanguageChangeListener(listener) {
                if (typeof listener === 'function') {
                    languageChangeListeners.push(listener);
                }
            }
            
            // Inicializar sistema de traducción
            function init() {
                loadSavedLanguage();
                
                // Agregar evento al botón de cambio de idioma
                const langButton = document.getElementById('language-toggle');
                if (langButton) {
                    langButton.addEventListener('click', () => {
                        const newLang = currentLang === 'es' ? 'en' : 'es';
                        changeLanguage(newLang);
                    });
                }
                
                console.log('✅ Sistema de traducción inicializado');
            }
            
            return {
                init,
                changeLanguage,
                translate,
                getCurrentLang: () => currentLang,
                addLanguageChangeListener,
                updateSubmenus
            };
        })();

        // ============================================
        // SISTEMA DE CHATBOT COMPLETO
        // ============================================
        const ChatbotSystem = (function() {
            // Base de conocimiento del chatbot
            const knowledgeBase = {
                es: {
                    saludos: [
                        "¡Hola! Soy tu asistente virtual de Mitronixs. ¿En qué puedo ayudarte hoy?",
                        "¡Hola! Bienvenido a Mitronixs. ¿Cómo puedo asistirte?",
                        "¡Buen día! Estoy aquí para resolver tus dudas sobre nuestros servicios de ingeniería y automatización."
                    ],
                    
                    servicios: {
                        "sistemas electrónicos": "Ofrecemos diseño, implementación y mantenimiento de sistemas electrónicos de control automatizados con tecnología de punta. Precio desde $1,200 MXN/hora.",
                        "cómputo industrial": "Soluciones integrales en hardware y software para equipos de cómputo industrial, desde servidores hasta sistemas embebidos. Precio desde $1,500 MXN/hora.",
                        "programación avanzada": "Desarrollo de software especializado, desde aplicaciones web hasta sistemas con machine learning e inteligencia artificial. Precio desde $1,800 MXN/hora.",
                        "robótica industrial": "Diseño, programación y mantenimiento de sistemas robóticos para aplicaciones industriales avanzadas. Precio desde $2,500 MXN/hora.",
                        "automatización": "Implementamos soluciones de automatización industrial que pueden reducir costos operativos hasta en un 70%. ¡Pregunta por nuestra calculadora de ROI!",
                        "precios": "Nuestros precios son por hora de servicio especializado y varían según el servicio: Sistemas Electrónicos ($1,200/h), Cómputo Industrial ($1,500/h), Programación ($1,800/h), Robótica ($2,500/h)."
                    },
                    
                    contacto: {
                        "dirección": "Estamos ubicados en Providencia, Guadalajara Jalisco, México.",
                        "teléfono": "Puedes llamarnos al +52 33 1234 5678.",
                        "email": "Escríbenos a contacto@mitronixs.com",
                        "horarios": "Nuestro horario de atención es de lunes a viernes de 9:00 a 18:00 horas."
                    },
                    
                    cotizaciones: {
                        "cómo solicitar": "Para solicitar una cotización, agrega servicios a tu carrito y haz clic en 'Generar Cotización'. También puedes contactarnos directamente por WhatsApp.",
                        "tiempo respuesta": "Normalmente respondemos las cotizaciones en un plazo de 24-48 horas hábiles.",
                        "validez": "Nuestras cotizaciones son válidas por 30 días a partir de su emisión."
                    },
                    
                    soporte: {
                        "técnico": "Ofrecemos soporte técnico especializado para todos nuestros sistemas instalados. Contamos con planes de mantenimiento preventivo y correctivo.",
                        "emergencias": "Para emergencias técnicas, contáctanos por WhatsApp o al teléfono de emergencias: +52 33 9876 5432.",
                        "garantía": "Todos nuestros servicios cuentan con garantía de 90 días por defectos de fabricación o instalación."
                    },
                    
                    respuestasPorDefecto: [
                        "Entiendo que preguntas sobre '%s'. Te recomiendo contactarnos directamente para una respuesta más precisa.",
                        "Esa es una buena pregunta sobre '%s'. ¿Te gustaría que te conecte con un especialista?",
                        "Para información detallada sobre '%s', te sugiero revisar nuestra sección de servicios o contactar a nuestro equipo de ventas.",
                        "Todavía estoy aprendiendo sobre '%s'. Mientras tanto, ¿puedo ayudarte con alguna otra consulta?"
                    ],
                    
                    despedidas: [
                        "¡Gracias por contactar a Mitronixs! Espero haberte ayudado.",
                        "Fue un placer asistirte. ¡Que tengas un excelente día!",
                        "Si tienes más preguntas, no dudes en escribirme. ¡Hasta luego!",
                        "Recuerda que también puedes contactarnos por WhatsApp para respuestas más rápidas. ¡Adiós!"
                    ]
                },
                
                en: {
                    saludos: [
                        "Hello! I'm your virtual assistant from Mitronixs. How can I help you today?",
                        "Hi! Welcome to Mitronixs. How can I assist you?",
                        "Good day! I'm here to answer your questions about our engineering and automation services."
                    ],
                    
                    servicios: {
                        "electronic systems": "We offer design, implementation and maintenance of automated electronic control systems with cutting-edge technology. Price from $1,200 MXN/hour.",
                        "industrial computing": "Comprehensive hardware and software solutions for industrial computing equipment, from servers to embedded systems. Price from $1,500 MXN/hour.",
                        "advanced programming": "Specialized software development, from web applications to systems with machine learning and artificial intelligence. Price from $1,800 MXN/hour.",
                        "industrial robotics": "Design, programming and maintenance of robotic systems for advanced industrial applications. Price from $2,500 MXN/hour.",
                        "automation": "We implement industrial automation solutions that can reduce operational costs by up to 70%. Ask about our ROI calculator!",
                        "prices": "Our prices are per hour of specialized service and vary by service: Electronic Systems ($1,200/h), Industrial Computing ($1,500/h), Programming ($1,800/h), Robotics ($2,500/h)."
                    },
                    
                    contacto: {
                        "address": "We are located in Providencia, Guadalajara Jalisco, Mexico.",
                        "phone": "You can call us at +52 33 1234 5678.",
                        "email": "Write to us at contact@mitronixs.com",
                        "hours": "Our business hours are Monday to Friday from 9:00 to 18:00."
                    },
                    
                    cotizaciones: {
                        "how to request": "To request a quote, add services to your cart and click 'Generate Quote'. You can also contact us directly via WhatsApp.",
                        "response time": "We typically respond to quotes within 24-48 business hours.",
                        "validity": "Our quotes are valid for 30 days from issuance."
                    },
                    
                    soporte: {
                        "technical": "We offer specialized technical support for all our installed systems. We have preventive and corrective maintenance plans.",
                        "emergencies": "For technical emergencies, contact us via WhatsApp or the emergency phone: +52 33 9876 5432.",
                        "warranty": "All our services come with a 90-day warranty for manufacturing or installation defects."
                    },
                    
                    respuestasPorDefecto: [
                        "I understand you're asking about '%s'. I recommend contacting us directly for a more accurate response.",
                        "That's a good question about '%s'. Would you like me to connect you with a specialist?",
                        "For detailed information about '%s', I suggest checking our services section or contacting our sales team.",
                        "I'm still learning about '%s'. In the meantime, can I help you with any other inquiry?"
                    ],
                    
                    despedidas: [
                        "Thank you for contacting Mitronixs! I hope I was helpful.",
                        "It was a pleasure to assist you. Have a great day!",
                        "If you have more questions, don't hesitate to write to me. Goodbye!",
                        "Remember you can also contact us via WhatsApp for faster responses. Goodbye!"
                    ]
                }
            };
            
            let currentLang = 'es';
            let conversationHistory = [];
            
            // Función para procesar el mensaje del usuario
            function processMessage(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                const langData = knowledgeBase[currentLang];
                
                // Guardar en historial
                conversationHistory.push({
                    type: 'user',
                    message: userMessage,
                    timestamp: new Date().toISOString()
                });
                
                // Limpiar el historial si es muy largo
                if (conversationHistory.length > 50) {
                    conversationHistory = conversationHistory.slice(-25);
                }
                
                // Buscar coincidencias
                let response = '';
                
                // Saludos
                if (lowerMessage.includes('hola') || lowerMessage.includes('hi') || 
                    lowerMessage.includes('hello') || lowerMessage.includes('buenos')) {
                    const saludos = langData.saludos;
                    response = saludos[Math.floor(Math.random() * saludos.length)];
                }
                
                // Despedidas
                else if (lowerMessage.includes('adiós') || lowerMessage.includes('chao') || 
                         lowerMessage.includes('bye') || lowerMessage.includes('gracias')) {
                    const despedidas = langData.despedidas;
                    response = despedidas[Math.floor(Math.random() * despedidas.length)];
                }
                
                // Servicios
                else if (lowerMessage.includes('servicio') || lowerMessage.includes('service') ||
                         lowerMessage.includes('qué ofrecen') || lowerMessage.includes('what do you offer')) {
                    
                    const servicios = Object.entries(langData.servicios)
                        .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                        .join('<br><br>');
                    
                    response = `<strong>${currentLang === 'es' ? 'Nuestros servicios:' : 'Our services:'}</strong><br><br>${servicios}`;
                }
                
                // Precios
                else if (lowerMessage.includes('precio') || lowerMessage.includes('costo') || 
                         lowerMessage.includes('price') || lowerMessage.includes('cost')) {
                    response = langData.servicios.precios || langData.servicios.prices;
                }
                
                // Contacto
                else if (lowerMessage.includes('contacto') || lowerMessage.includes('contact') ||
                         lowerMessage.includes('dirección') || lowerMessage.includes('address') ||
                         lowerMessage.includes('teléfono') || lowerMessage.includes('phone') ||
                         lowerMessage.includes('email') || lowerMessage.includes('correo')) {
                    
                    const contacto = Object.entries(langData.contacto)
                        .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                        .join('<br>');
                    
                    response = `<strong>${currentLang === 'es' ? 'Información de contacto:' : 'Contact information:'}</strong><br><br>${contacto}`;
                }
                
                // Cotizaciones
                else if (lowerMessage.includes('cotización') || lowerMessage.includes('quote') ||
                         lowerMessage.includes('presupuesto') || lowerMessage.includes('budget')) {
                    
                    const cotizaciones = Object.entries(langData.cotizaciones)
                        .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                        .join('<br><br>');
                    
                    response = `<strong>${currentLang === 'es' ? 'Información sobre cotizaciones:' : 'Quote information:'}</strong><br><br>${cotizaciones}`;
                }
                
                // Soporte técnico
                else if (lowerMessage.includes('soporte') || lowerMessage.includes('support') ||
                         lowerMessage.includes('garantía') || lowerMessage.includes('warranty') ||
                         lowerMessage.includes('emergencia') || lowerMessage.includes('emergency')) {
                    
                    const soporte = Object.entries(langData.soporte)
                        .map(([key, value]) => `<strong>${key}:</strong> ${value}`)
                        .join('<br><br>');
                    
                    response = `<strong>${currentLang === 'es' ? 'Soporte y garantía:' : 'Support and warranty:'}</strong><br><br>${soporte}`;
                }
                
                // Respuestas específicas por palabra clave
                else {
                    let found = false;
                    
                    // Buscar en todos los temas
                    const allTopics = {
                        ...langData.servicios,
                        ...langData.contacto,
                        ...langData.cotizaciones,
                        ...langData.soporte
                    };
                    
                    for (const [keyword, answer] of Object.entries(allTopics)) {
                        if (lowerMessage.includes(keyword.toLowerCase())) {
                            response = answer;
                            found = true;
                            break;
                        }
                    }
                    
                    // Si no se encontró, usar respuesta por defecto
                    if (!found) {
                        const defaultResponses = langData.respuestasPorDefecto;
                        const randomResponse = defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
                        
                        // Extraer palabras clave del mensaje
                        const words = userMessage.split(' ').filter(word => word.length > 3);
                        const keyword = words.length > 0 ? words[0] : 'eso';
                        
                        response = randomResponse.replace('%s', keyword);
                    }
                }
                
                // Guardar respuesta en historial
                conversationHistory.push({
                    type: 'bot',
                    message: response,
                    timestamp: new Date().toISOString()
                });
                
                return response;
            }
            
            // Función para agregar mensaje al chat
            function addMessageToChat(message, isUser = false) {
                const messagesContainer = document.getElementById('chatbot-messages');
                if (!messagesContainer) return;
                
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
                
                // Sanitizar el mensaje
                const cleanMessage = DOMPurify.sanitize(message);
                messageDiv.innerHTML = cleanMessage;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
            
            // Función para mostrar indicador de escritura
            function showTypingIndicator() {
                const messagesContainer = document.getElementById('chatbot-messages');
                if (!messagesContainer) return;
                
                const typingDiv = document.createElement('div');
                typingDiv.className = 'message bot-message typing';
                typingDiv.innerHTML = `
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                `;
                
                messagesContainer.appendChild(typingDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                return typingDiv;
            }
            
            // Función para enviar mensaje
            function sendMessage() {
                const input = document.getElementById('chatbot-input');
                if (!input) return;
                
                const userMessage = input.value.trim();
                if (!userMessage) return;
                
                // Agregar mensaje del usuario
                addMessageToChat(userMessage, true);
                input.value = '';
                
                // Mostrar indicador de escritura
                const typingIndicator = showTypingIndicator();
                
                // Procesar respuesta (con retraso para simular pensamiento)
                setTimeout(() => {
                    // Remover indicador de escritura
                    if (typingIndicator && typingIndicator.parentNode) {
                        typingIndicator.remove();
                    }
                    
                    // Obtener respuesta
                    const response = processMessage(userMessage);
                    
                    // Agregar respuesta del bot
                    addMessageToChat(response, false);
                    
                    // Mostrar respuestas rápidas si es apropiado
                    showQuickReplies(response);
                }, 1000 + Math.random() * 1000);
            }
            
            // Función para mostrar respuestas rápidas
            function showQuickReplies(lastBotMessage) {
                const messagesContainer = document.getElementById('chatbot-messages');
                if (!messagesContainer) return;
                
                const quickRepliesContainer = document.createElement('div');
                quickRepliesContainer.className = 'quick-replies';
                
                // Determinar qué respuestas rápidas mostrar basado en el último mensaje
                const lowerMessage = lastBotMessage.toLowerCase();
                const langData = knowledgeBase[currentLang];
                
                let quickReplies = [];
                
                if (lowerMessage.includes('servicio') || lowerMessage.includes('service')) {
                    quickReplies = Object.keys(langData.servicios).slice(0, 4);
                } else if (lowerMessage.includes('contacto') || lowerMessage.includes('contact')) {
                    quickReplies = Object.keys(langData.contacto).slice(0, 3);
                } else if (lowerMessage.includes('cotización') || lowerMessage.includes('quote')) {
                    quickReplies = Object.keys(langData.cotizaciones);
                } else {
                    // Respuestas rápidas generales
                    quickReplies = currentLang === 'es' 
                        ? ['Servicios', 'Precios', 'Contacto', 'Cotización', 'Soporte técnico']
                        : ['Services', 'Prices', 'Contact', 'Quote', 'Technical support'];
                }
                
                // Crear botones de respuestas rápidas
                quickReplies.forEach(reply => {
                    const button = document.createElement('button');
                    button.className = 'quick-reply';
                    button.textContent = reply;
                    button.addEventListener('click', () => {
                        // Simular que el usuario hizo clic en la respuesta rápida
                        document.getElementById('chatbot-input').value = reply;
                        sendMessage();
                    });
                    quickRepliesContainer.appendChild(button);
                });
                
                // Agregar al chat
                const lastMessage = messagesContainer.lastElementChild;
                if (lastMessage && lastMessage.classList.contains('bot-message')) {
                    lastMessage.appendChild(quickRepliesContainer);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }
            }
            
            // Función para cambiar idioma del chatbot
            function setLanguage(lang) {
                if (knowledgeBase[lang]) {
                    currentLang = lang;
                    
                    // Actualizar mensaje de bienvenida
                    const messagesContainer = document.getElementById('chatbot-messages');
                    if (messagesContainer && messagesContainer.children.length === 1) {
                        const welcomeMessage = knowledgeBase[lang].saludos[0];
                        messagesContainer.children[0].innerHTML = DOMPurify.sanitize(welcomeMessage);
                    }
                    
                    // Actualizar placeholder del input
                    const input = document.getElementById('chatbot-input');
                    if (input) {
                        input.placeholder = lang === 'es' 
                            ? 'Escribe tu mensaje...' 
                            : 'Type your message...';
                    }
                }
            }
            
            // Función para inicializar el chatbot
            function init() {
                // Configurar event listeners
                const sendButton = document.getElementById('send-chatbot-message');
                const input = document.getElementById('chatbot-input');
                
                if (sendButton) {
                    sendButton.addEventListener('click', sendMessage);
                }
                
                if (input) {
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            sendMessage();
                        }
                    });
                }
                
                // Sincronizar con el idioma principal
                setLanguage(TranslationSystem.getCurrentLang());
                
                console.log('✅ Sistema de chatbot inicializado');
            }
            
            // Función para abrir el chatbot
            function openChatbot() {
                const chatbotWidget = document.getElementById('chatbot-widget');
                if (chatbotWidget) {
                    chatbotWidget.style.display = 'flex';
                    document.body.classList.add('panel-open');
                    
                    // Enfocar el input
                    setTimeout(() => {
                        const input = document.getElementById('chatbot-input');
                        if (input) input.focus();
                    }, 300);
                }
            }
            
            // Función para cerrar el chatbot
            function closeChatbot() {
                const chatbotWidget = document.getElementById('chatbot-widget');
                if (chatbotWidget) {
                    chatbotWidget.style.display = 'none';
                    document.body.classList.remove('panel-open');
                }
            }
            
            // Función para reiniciar la conversación
            function resetConversation() {
                conversationHistory = [];
                const messagesContainer = document.getElementById('chatbot-messages');
                if (messagesContainer) {
                    messagesContainer.innerHTML = '';
                    
                    // Agregar mensaje de bienvenida
                    const welcomeMessage = knowledgeBase[currentLang].saludos[0];
                    addMessageToChat(welcomeMessage, false);
                }
            }
            
            return {
                init,
                openChatbot,
                closeChatbot,
                setLanguage,
                resetConversation,
                sendMessage,
                getConversationHistory: () => [...conversationHistory]
            };
        })();

        // ============================================
        // MÓDULO DE CARRITO (ORIGINAL)
        // ============================================
        const CartModule = (function() {
            let cart = [];
            let cartListeners = [];
            
            function loadCart() {
                try {
                    const savedCart = localStorage.getItem('mitronixs_cart');
                    if (savedCart) {
                        cart = JSON.parse(savedCart);
                        notifyListeners();
                    }
                } catch (e) {
                    console.error('Error cargando carrito:', e);
                    cart = [];
                }
            }
            
            function saveCart() {
                try {
                    localStorage.setItem('mitronixs_cart', JSON.stringify(cart));
                } catch (e) {
                    console.error('Error guardando carrito:', e);
                }
            }
            
            function addItem(item) {
                const existingItem = cart.find(i => i.service === item.service);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        service: item.service,
                        price: item.price,
                        quantity: 1,
                        image: item.image
                    });
                }
                
                saveCart();
                notifyListeners();
            }
            
            function removeItem(index) {
                if (index >= 0 && index < cart.length) {
                    cart.splice(index, 1);
                    saveCart();
                    notifyListeners();
                }
            }
            
            function clearCart() {
                cart = [];
                saveCart();
                notifyListeners();
            }
            
            function getCart() {
                return [...cart];
            }
            
            function getTotal() {
                return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            }
            
            function getCount() {
                return cart.reduce((count, item) => count + item.quantity, 0);
            }
            
            function addListener(listener) {
                cartListeners.push(listener);
            }
            
            function notifyListeners() {
                cartListeners.forEach(listener => listener(cart));
            }
            
            return {
                loadCart,
                addItem,
                removeItem,
                clearCart,
                getCart,
                getTotal,
                getCount,
                addListener
            };
        })();

        // ============================================
        // SISTEMA DE CONTROL DE COTIZACIONES
        // ============================================
        const QuotationControlSystem = (function() {
            const STORAGE_KEY = 'mitronixs_quotations_system';
            const CLIENTS_KEY = 'mitronixs_clients';
            
            let quotations = [];
            let clients = [];
            
            // Inicializar sistema
            function init() {
                loadQuotations();
                loadClients();
                console.log('✅ Sistema de cotizaciones inicializado');
            }
            
            // Cargar cotizaciones
            function loadQuotations() {
                try {
                    const saved = localStorage.getItem(STORAGE_KEY);
                    quotations = saved ? JSON.parse(saved) : [];
                } catch (e) {
                    console.error('Error cargando cotizaciones:', e);
                    quotations = [];
                }
            }
            
            // Cargar clientes
            function loadClients() {
                try {
                    const saved = localStorage.getItem(CLIENTS_KEY);
                    clients = saved ? JSON.parse(saved) : [];
                } catch (e) {
                    console.error('Error cargando clientes:', e);
                    clients = [];
                }
            }
            
            // Guardar cotizaciones
            function saveQuotations() {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(quotations));
                } catch (e) {
                    console.error('Error guardando cotizaciones:', e);
                }
            }
            
            // Guardar clientes
            function saveClients() {
                try {
                    localStorage.setItem(CLIENTS_KEY, JSON.stringify(clients));
                } catch (e) {
                    console.error('Error guardando clientes:', e);
                }
            }
            
            // Generar ID único
            function generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            }
            
            // Agregar cliente
            function addClient(clientData) {
                const client = {
                    id: generateId(),
                    ...clientData,
                    createdAt: new Date().toISOString(),
                    quotationCount: 0
                };
                
                clients.push(client);
                saveClients();
                return client;
            }
            
            // Buscar cliente por email
            function findClientByEmail(email) {
                return clients.find(client => client.email.toLowerCase() === email.toLowerCase());
            }
            
            // Agregar cotización
            function addQuotation(quotationData) {
                const quotation = {
                    id: generateId(),
                    quotationNumber: quotationData.quotationNumber,
                    date: new Date().toISOString(),
                    client: quotationData.client,
                    items: quotationData.items,
                    totals: quotationData.totals,
                    status: 'pending',
                    probability: 50,
                    notes: '',
                    assignedTo: 'carlos',
                    followUpDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    internalNotes: '',
                    history: [{
                        date: new Date().toISOString(),
                        action: 'created',
                        details: 'Cotización creada'
                    }]
                };
                
                quotations.push(quotation);
                saveQuotations();
                
                // Actualizar contador de cliente
                const client = findClientByEmail(quotation.client.email);
                if (client) {
                    client.quotationCount++;
                    saveClients();
                } else {
                    // Crear cliente si no existe
                    addClient({
                        name: quotation.client.name,
                        email: quotation.client.email,
                        phone: quotation.client.phone || '',
                        company: quotation.client.company || ''
                    });
                }
                
                console.log('✅ Cotización agregada:', quotation.quotationNumber);
                return quotation;
            }
            
            // Obtener estadísticas
            function getStatistics() {
                const total = quotations.length;
                const pending = quotations.filter(q => q.status === 'pending').length;
                const approved = quotations.filter(q => q.status === 'approved').length;
                const rejected = quotations.filter(q => q.status === 'rejected').length;
                const inProgress = quotations.filter(q => q.status === 'in-progress').length;
                const onHold = quotations.filter(q => q.status === 'on-hold').length;
                
                const totalRevenue = quotations
                    .filter(q => q.status === 'approved')
                    .reduce((sum, q) => sum + q.totals.total, 0);
                
                return {
                    total,
                    pending,
                    approved,
                    rejected,
                    inProgress,
                    onHold,
                    totalRevenue
                };
            }
            
            // Filtrar cotizaciones
            function filterQuotations(filters = {}) {
                let filtered = [...quotations];
                
                if (filters.status && filters.status !== 'all') {
                    filtered = filtered.filter(q => q.status === filters.status);
                }
                
                if (filters.search) {
                    const searchTerm = filters.search.toLowerCase();
                    filtered = filtered.filter(q => 
                        q.client.name.toLowerCase().includes(searchTerm) ||
                        q.client.email.toLowerCase().includes(searchTerm) ||
                        q.quotationNumber.toLowerCase().includes(searchTerm)
                    );
                }
                
                return filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            // Generar número de cotización
            function generateQuotationNumber() {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                
                const lastNumber = localStorage.getItem('mitronixs_quotation_counter') || '0';
                const newNumber = parseInt(lastNumber) + 1;
                
                localStorage.setItem('mitronixs_quotation_counter', newNumber);
                
                return `COT-${year}${month}${day}-${String(newNumber).padStart(4, '0')}`;
            }
            
            // Formatear moneda
            function formatCurrency(amount) {
                return new Intl.NumberFormat('es-MX', {
                    style: 'currency',
                    currency: 'MXN',
                    minimumFractionDigits: 2
                }).format(amount);
            }
            
            // Generar HTML del panel de administración
            function generateAdminPanel() {
                const stats = getStatistics();
                const recentQuotations = filterQuotations().slice(0, 10);
                
                return `
                    <div class="admin-header">
                        <h2 class="admin-title">Sistema de Control de Cotizaciones</h2>
                        <button class="admin-close" id="admin-close">&times;</button>
                    </div>
                    
                    <div class="admin-tabs">
                        <button class="admin-tab active" data-tab="dashboard">Dashboard</button>
                        <button class="admin-tab" data-tab="quotations">Cotizaciones (${quotations.length})</button>
                        <button class="admin-tab" data-tab="clients">Clientes (${clients.length})</button>
                    </div>
                    
                    <!-- Dashboard -->
                    <div class="admin-content active" id="dashboard-content">
                        <div class="stats-grid">
                            <div class="stat-card total">
                                <h3>Total Cotizaciones</h3>
                                <div class="stat-value">${stats.total}</div>
                                <div class="stat-label">Generadas</div>
                            </div>
                            
                            <div class="stat-card pending">
                                <h3>Pendientes</h3>
                                <div class="stat-value">${stats.pending}</div>
                                <div class="stat-label">Por aprobar</div>
                            </div>
                            
                            <div class="stat-card approved">
                                <h3>Aprobadas</h3>
                                <div class="stat-value">${stats.approved}</div>
                                <div class="stat-label">Cerradas</div>
                            </div>
                            
                            <div class="stat-card revenue">
                                <h3>Ingresos Totales</h3>
                                <div class="stat-value">$${stats.totalRevenue.toLocaleString('es-MX')}</div>
                                <div class="stat-label">MXN</div>
                            </div>
                        </div>
                        
                        <div style="background: white; border-radius: 10px; padding: 1.5rem; margin-top: 2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                            <h3 style="margin-bottom: 1rem; color: #091827;">Cotizaciones Recientes</h3>
                            ${recentQuotations.length > 0 ? `
                                <div class="quotations-grid">
                                    ${recentQuotations.map(q => generateQuotationCard(q)).join('')}
                                </div>
                            ` : `
                                <div class="empty-state">
                                    <i class="fas fa-file-invoice-dollar"></i>
                                    <h3>No hay cotizaciones recientes</h3>
                                    <p>Las cotizaciones generadas aparecerán aquí</p>
                                </div>
                            `}
                        </div>
                    </div>
                    
                    <!-- Cotizaciones -->
                    <div class="admin-content" id="quotations-content">
                        <div class="filter-section">
                            <div class="filter-row">
                                <div class="filter-group">
                                    <label for="status-filter">Estado:</label>
                                    <select id="status-filter">
                                        <option value="all">Todos los estados</option>
                                        <option value="pending">Pendiente</option>
                                        <option value="approved">Aprobada</option>
                                        <option value="rejected">Rechazada</option>
                                        <option value="in-progress">En Proceso</option>
                                        <option value="on-hold">En Espera</option>
                                    </select>
                                </div>
                                
                                <div class="filter-group">
                                    <label for="search-filter">Buscar:</label>
                                    <input type="text" id="search-filter" placeholder="Cliente, email o número">
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 10px; margin-top: 1rem;">
                                <button class="btn" id="apply-filters">Aplicar Filtros</button>
                                <button class="btn secondary" id="reset-filters">Restablecer</button>
                            </div>
                        </div>
                        
                        ${quotations.length > 0 ? `
                            <div class="quotations-grid" id="filtered-quotations">
                                ${filterQuotations().map(q => generateQuotationCard(q)).join('')}
                            </div>
                        ` : `
                            <div class="empty-state">
                                <i class="fas fa-file-invoice-dollar"></i>
                                <h3>No hay cotizaciones</h3>
                                <p>Comienza generando una cotización desde el carrito</p>
                            </div>
                        `}
                    </div>
                    
                    <!-- Clientes -->
                    <div class="admin-content" id="clients-content">
                        <div style="background: white; border-radius: 10px; padding: 1.5rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                            <h3 style="margin-bottom: 1rem; color: #091827;">Lista de Clientes</h3>
                            ${clients.length > 0 ? `
                                <div style="overflow-x: auto;">
                                    <table style="width: 100%; border-collapse: collapse; margin: 1.5rem 0; border-radius: 8px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                                        <thead>
                                            <tr style="background: linear-gradient(135deg, #091827 0%, #1a365d 100%); color: white;">
                                                <th style="padding: 1rem; text-align: left;">Nombre</th>
                                                <th style="padding: 1rem; text-align: left;">Email</th>
                                                <th style="padding: 1rem; text-align: left;">Teléfono</th>
                                                <th style="padding: 1rem; text-align: left;">Cotizaciones</th>
                                                <th style="padding: 1rem; text-align: left;">Fecha Registro</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${clients.map(client => `
                                                <tr style="border-bottom: 1px solid #eee;">
                                                    <td style="padding: 1rem;">${DOMPurify.sanitize(client.name)}</td>
                                                    <td style="padding: 1rem;">${DOMPurify.sanitize(client.email)}</td>
                                                    <td style="padding: 1rem;">${DOMPurify.sanitize(client.phone || 'No especificado')}</td>
                                                    <td style="padding: 1rem;">${client.quotationCount}</td>
                                                    <td style="padding: 1rem;">${new Date(client.createdAt).toLocaleDateString()}</td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            ` : `
                                <div class="empty-state">
                                    <i class="fas fa-users"></i>
                                    <h3>No hay clientes registrados</h3>
                                    <p>Los clientes aparecerán aquí después de generar cotizaciones</p>
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }
            
            // Generar tarjeta de cotización
            function generateQuotationCard(quotation) {
                const statusMap = {
                    'pending': { class: 'status-pending', text: 'Pendiente' },
                    'approved': { class: 'status-approved', text: 'Aprobada' },
                    'rejected': { class: 'status-rejected', text: 'Rechazada' },
                    'in-progress': { class: 'status-in-progress', text: 'En Proceso' },
                    'on-hold': { class: 'status-on-hold', text: 'En Espera' }
                };
                
                const status = statusMap[quotation.status] || statusMap.pending;
                
                return `
                    <div class="quotation-card" data-id="${quotation.id}">
                        <div class="quotation-card-header">
                            <div class="quotation-number">${quotation.quotationNumber}</div>
                            <div class="quotation-status ${status.class}">${status.text}</div>
                        </div>
                        
                        <div class="quotation-client">
                            <h4>${DOMPurify.sanitize(quotation.client.name)}</h4>
                            <p>${DOMPurify.sanitize(quotation.client.email)}</p>
                            ${quotation.client.company ? `<p><small>${DOMPurify.sanitize(quotation.client.company)}</small></p>` : ''}
                        </div>
                        
                        <div class="quotation-details">
                            <div class="detail-row">
                                <span>Fecha:</span>
                                <span>${new Date(quotation.date).toLocaleDateString()}</span>
                            </div>
                            <div class="detail-row">
                                <span>Total:</span>
                                <span>$${quotation.totals.total.toLocaleString('es-MX')}</span>
                            </div>
                        </div>
                        
                        <div class="quotation-actions">
                            <button class="admin-btn view" onclick="window.print()">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                    </div>
                `;
            }
            
            // Generar cotización limpia para el cliente
            function generateClientQuotationHTML(clientData, cartItems, quotationNumber) {
                // Calcular totales
                const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const iva = subtotal * 0.16;
                const total = subtotal + iva;
                
                const today = new Date();
                const validityDate = new Date();
                validityDate.setDate(today.getDate() + 30);
                
                const formatDate = (date) => {
                    return date.toLocaleDateString('es-MX', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                };
                
                return `
                    <div class="quotation-client-version">
                        <div class="quotation-logo">
                            <div class="automation-logo">
                                <div class="logo-base"></div>
                                <div class="connection-ring"></div>
                                <div class="control-node"></div>
                                <div class="robotic-arm arm-segment-1"></div>
                                <div class="robotic-arm arm-segment-2"></div>
                                <div class="robotic-arm arm-segment-3"></div>
                                <div class="iot-node node-1"></div>
                                <div class="iot-node node-2"></div>
                                <div class="iot-node node-3"></div>
                                <div class="iot-node node-4"></div>
                                <div class="iot-node node-5"></div>
                                <div class="iot-node node-6"></div>
                                <div class="data-flow">
                                    <div class="flow-line flow-1"></div>
                                    <div class="flow-line flow-2"></div>
                                    <div class="flow-line flow-3"></div>
                                </div>
                            </div>
                            <div class="company-name-quotation">
                                <span class="mitro">Mitro</span><span class="tech">nixs</span>
                            </div>
                            <p>Soluciones Inteligentes para una Industria Conectada</p>
                        </div>
                        
                        <div style="background: #f8f9fa; color: #333; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                            <h2 style="margin: 0 0 0.5rem 0; font-size: 1.8rem;">Cotización de Servicios</h2>
                            <div style="font-size: 1.2rem; font-weight: bold; color: #091827;">${quotationNumber}</div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                            <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #3cba54;">
                                <h3 style="margin: 0 0 1rem 0; color: #091827;"><i class="fas fa-building"></i> Mitronixs SAS de CV</h3>
                                <p><strong>Dirección:</strong> Providencia, Guadalajara Jalisco, México</p>
                                <p><strong>Teléfono:</strong> +52 33 1234 5678</p>
                                <p><strong>Email:</strong> cotizaciones@mitronixs.com</p>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #3cba54;">
                                <h3 style="margin: 0 0 1rem 0; color: #091827;"><i class="fas fa-user"></i> Datos del Cliente</h3>
                                <p><strong>Nombre:</strong> ${DOMPurify.sanitize(clientData.name)}</p>
                                ${clientData.company ? `<p><strong>Empresa:</strong> ${DOMPurify.sanitize(clientData.company)}</p>` : ''}
                                <p><strong>Email:</strong> ${DOMPurify.sanitize(clientData.email)}</p>
                                ${clientData.phone ? `<p><strong>Teléfono:</strong> ${DOMPurify.sanitize(clientData.phone)}</p>` : ''}
                            </div>
                        </div>
                        
                        <div style="margin: 2rem 0;">
                            <p><strong>Fecha de Emisión:</strong> ${formatDate(today)}</p>
                            <p><strong>Válida hasta:</strong> ${formatDate(validityDate)}</p>
                        </div>
                        
                        <table style="width: 100%; border-collapse: collapse; margin: 1.5rem 0; border-radius: 8px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #091827 0%, #1a365d 100%); color: white;">
                                    <th style="padding: 1rem; text-align: left;">Descripción del Servicio</th>
                                    <th style="padding: 1rem; text-align: left;">Cantidad (Horas)</th>
                                    <th style="padding: 1rem; text-align: left;">Precio Unitario</th>
                                    <th style="padding: 1rem; text-align: left;">Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${cartItems.map(item => `
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 1rem;">${DOMPurify.sanitize(item.service)}</td>
                                        <td style="padding: 1rem;">${item.quantity}</td>
                                        <td style="padding: 1rem;">${formatCurrency(item.price)}</td>
                                        <td style="padding: 1rem;">${formatCurrency(item.price * item.quantity)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        
                        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-top: 2rem;">
                            <div class="total-row" style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid #ddd;">
                                <span>Subtotal:</span>
                                <span>${formatCurrency(subtotal)}</span>
                            </div>
                            <div class="total-row" style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid #ddd;">
                                <span>IVA (16%):</span>
                                <span>${formatCurrency(iva)}</span>
                            </div>
                            <div class="total-row grand-total" style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; font-size: 1.2rem; font-weight: bold; color: #091827;">
                                <span>TOTAL:</span>
                                <span>${formatCurrency(total)}</span>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-top: 2rem; border-left: 4px solid #3cba54;">
                            <h4 style="margin: 0 0 1rem 0; color: #091827;"><i class="fas fa-sticky-note"></i> Términos y Condiciones</h4>
                            <ul style="margin: 0; padding-left: 1.5rem;">
                                <li>Esta cotización es válida por 30 días a partir de la fecha de emisión</li>
                                <li>Los precios están expresados en Pesos Mexicanos (MXN)</li>
                                <li>Los servicios se facturarán contra entrega</li>
                                <li>El pago debe realizarse dentro de los 15 días posteriores a la facturación</li>
                            </ul>
                        </div>
                        
                        <div class="client-actions">
                            <button class="client-btn print" id="client-print">
                                <i class="fas fa-print"></i> Imprimir Cotización
                            </button>
                            <button class="client-btn email" id="client-send-email">
                                <i class="fas fa-paper-plane"></i> Descargar PDF
                            </button>
                            <button class="client-btn close" id="client-close-quotation">
                                <i class="fas fa-times"></i> Cerrar
                            </button>
                        </div>
                    </div>
                `;
            }
            
            // Mostrar panel de administración
            function showAdminPanel() {
                const adminModal = document.getElementById('admin-modal');
                const adminContainer = document.getElementById('admin-container');
                
                adminContainer.innerHTML = generateAdminPanel();
                adminModal.style.display = 'block';
                document.body.classList.add('panel-open');
                
                addAdminEventListeners();
            }
            
            // Agregar event listeners al panel
            function addAdminEventListeners() {
                // Cerrar panel
                document.getElementById('admin-close').addEventListener('click', () => {
                    document.getElementById('admin-modal').style.display = 'none';
                    document.body.classList.remove('panel-open');
                });
                
                // Tabs
                document.querySelectorAll('.admin-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabId = tab.getAttribute('data-tab');
                        
                        document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
                        
                        tab.classList.add('active');
                        document.getElementById(`${tabId}-content`).classList.add('active');
                    });
                });
                
                // Filtros
                const applyFiltersBtn = document.getElementById('apply-filters');
                const resetFiltersBtn = document.getElementById('reset-filters');
                
                if (applyFiltersBtn) {
                    applyFiltersBtn.addEventListener('click', applyFilters);
                }
                
                if (resetFiltersBtn) {
                    resetFiltersBtn.addEventListener('click', resetFilters);
                }
            }
            
            // Funciones de filtrado
            function applyFilters() {
                const status = document.getElementById('status-filter')?.value || 'all';
                const search = document.getElementById('search-filter')?.value || '';
                
                const filtered = filterQuotations({ status, search });
                const container = document.getElementById('filtered-quotations');
                
                if (container) {
                    if (filtered.length > 0) {
                        container.innerHTML = filtered.map(q => generateQuotationCard(q)).join('');
                    } else {
                        container.innerHTML = `
                            <div style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
                                <i class="fas fa-search" style="font-size: 3rem; color: #e9ecef;"></i>
                                <h3>No se encontraron cotizaciones</h3>
                                <p>Intenta con otros filtros</p>
                        `;
                    }
                }
            }
            
            function resetFilters() {
                const statusFilter = document.getElementById('status-filter');
                const searchFilter = document.getElementById('search-filter');
                
                if (statusFilter) statusFilter.value = 'all';
                if (searchFilter) searchFilter.value = '';
                
                applyFilters();
            }
            
            // Mostrar cotización limpia al cliente
            function showClientQuotation(clientData, cartItems) {
                const modal = document.getElementById('client-quotation-modal');
                const container = document.getElementById('client-quotation-content');
                
                // Generar número de cotización
                const quotationNumber = generateQuotationNumber();
                
                // Crear objeto de cotización
                const quotationData = {
                    quotationNumber,
                    client: clientData,
                    items: cartItems,
                    totals: {
                        subtotal: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                        iva: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0) * 0.16,
                        total: cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0) * 1.16
                    }
                };
                
                // Guardar en el sistema
                addQuotation(quotationData);
                
                // Generar HTML limpio para el cliente
                container.innerHTML = generateClientQuotationHTML(clientData, cartItems, quotationNumber);
                
                // Mostrar modal
                modal.style.display = 'block';
                document.body.classList.add('panel-open');
                
                // Agregar event listeners
                document.getElementById('client-print').addEventListener('click', () => {
                    window.print();
                });
                
                document.getElementById('client-send-email').addEventListener('click', () => {
                    downloadQuotationPDF(quotationData);
                });
                
                document.getElementById('client-close-quotation').addEventListener('click', () => {
                    modal.style.display = 'none';
                    document.body.classList.remove('panel-open');
                });
                
                // Cerrar al hacer clic fuera
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                        document.body.classList.remove('panel-open');
                    }
                });
            }
            
            function downloadQuotationPDF(quotationData) {
                const element = document.getElementById('client-quotation-content');
                const originalDisplay = element.style.display;
                element.style.display = 'block';
                
                html2canvas(element, {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#ffffff'
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new window.jspdf.jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    const imgWidth = 210;
                    const pageHeight = 297;
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 0;
                    
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                    
                    while (heightLeft >= 0) {
                        position = heightLeft - imgHeight;
                        pdf.addPage();
                        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;
                    }
                    
                    pdf.save(`Cotizacion_Mitronixs_${quotationData.quotationNumber}.pdf`);
                    
                    element.style.display = originalDisplay;
                    
                    alert(`✅ PDF descargado: Cotizacion_Mitronixs_${quotationData.quotationNumber}.pdf`);
                });
            }
            
            return {
                init,
                showAdminPanel,
                showClientQuotation,
                generateQuotationNumber
            };
        })();

        // ============================================
        // FUNCIONES PRINCIPALES
        // ============================================

        // Función para generar cotización desde el carrito
        function generateQuotationFromCart() {
            const cart = CartModule.getCart();
            
            if (cart.length === 0) {
                alert('El carrito está vacío. Agrega servicios antes de generar una cotización.');
                return;
            }
            
            // Mostrar formulario para datos del cliente
            showClientFormForQuotation();
        }

        function showClientFormForQuotation() {
            const cartModal = document.getElementById('cart-modal');
            const overlay = document.getElementById('overlay');
            
            // Cerrar carrito primero
            if (cartModal) cartModal.style.display = 'none';
            if (overlay) overlay.style.display = 'none';
            
            // Crear formulario de datos del cliente
            const formHTML = `
                <div class="quotation-modal" style="display: block;">
                    <div class="quotation-container">
                        <div class="quotation-header">
                            <h2 class="quotation-title">Datos para tu Cotización</h2>
                            <button class="quotation-close" id="close-client-form">&times;</button>
                        </div>
                        
                        <form id="clientQuotationForm" class="quotation-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="client-name">Nombre Completo *</label>
                                    <input type="text" id="client-name" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="client-company">Empresa (opcional)</label>
                                    <input type="text" id="client-company">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="client-email">Email *</label>
                                    <input type="email" id="client-email" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="client-phone">Teléfono (opcional)</label>
                                    <input type="tel" id="client-phone">
                                </div>
                            </div>
                            
                            <div class="quotation-actions">
                                <button type="button" class="quotation-btn secondary" id="cancel-client-form">
                                    Cancelar
                                </button>
                                <button type="submit" class="quotation-btn primary">
                                    <i class="fas fa-file-invoice-dollar"></i> Generar mi Cotización
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            // Crear modal temporal
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = formHTML;
            document.body.appendChild(tempDiv);
            
            // Agregar event listeners
            document.getElementById('close-client-form').addEventListener('click', () => {
                tempDiv.remove();
            });
            
            document.getElementById('cancel-client-form').addEventListener('click', () => {
                tempDiv.remove();
            });
            
            document.getElementById('clientQuotationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const clientData = {
                    name: document.getElementById('client-name').value.trim(),
                    company: document.getElementById('client-company').value.trim(),
                    email: document.getElementById('client-email').value.trim(),
                    phone: document.getElementById('client-phone').value.trim()
                };
                
                // Validar datos
                if (!clientData.name || clientData.name.length < 2) {
                    alert('Por favor ingresa un nombre válido (mínimo 2 caracteres).');
                    return;
                }
                
                if (!isValidEmail(clientData.email)) {
                    alert('Por favor ingresa un email válido.');
                    return;
                }
                
                // Remover formulario temporal
                tempDiv.remove();
                
                // Generar cotización usando el nuevo sistema
                const cart = CartModule.getCart();
                QuotationControlSystem.showClientQuotation(clientData, cart);
                
                // Limpiar carrito
                CartModule.clearCart();
            });
        }

        // ============================================
        // FUNCIONES DE VALIDACIÓN
        // ============================================
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }
        
        function isValidMexicanPhone(phone) {
            if (!phone || phone.trim() === '') return true;
            const cleanPhone = phone.replace(/\s+/g, '').replace(/[\(\)\-]/g, '');
            const patterns = [
                /^\+52\d{10}$/,
                /^52\d{10}$/,
                /^[2-9]\d{9}$/,
                /^[2-9]\d{1}\s?\d{4}\s?\d{4}$/
            ];
            return patterns.some(pattern => pattern.test(cleanPhone));
        }

        // ============================================
        // FUNCIÓN calcularROI CON TRADUCCIÓN
        // ============================================
        function calcularROI() {
            const operarios = parseInt(document.getElementById('operarios').value);
            const horas = parseInt(document.getElementById('horas').value);
            const dias = parseInt(document.getElementById('dias').value);
            const salario = parseInt(document.getElementById('salario').value);
            
            let isValid = true;
            const currentLang = TranslationSystem.getCurrentLang();
            
            // Mensajes de error traducidos
            const errorMessages = {
                es: {
                    operarios: 'Ingresa un número válido de operarios (1-100)',
                    horas: 'Ingresa horas válidas (1-24)',
                    dias: 'Ingresa días válidos (1-31)',
                    salario: 'Ingresa un salario válido'
                },
                en: {
                    operarios: 'Enter a valid number of operators (1-100)',
                    horas: 'Enter valid hours (1-24)',
                    dias: 'Enter valid days (1-31)',
                    salario: 'Enter a valid salary'
                }
            };
            
            if (operarios <= 0 || operarios > 100) {
                document.getElementById('operarios-error').textContent = errorMessages[currentLang].operarios;
                document.getElementById('operarios-error').classList.add('active');
                isValid = false;
            } else {
                document.getElementById('operarios-error').classList.remove('active');
            }
            
            if (horas <= 0 || horas > 24) {
                document.getElementById('horas-error').textContent = errorMessages[currentLang].horas;
                document.getElementById('horas-error').classList.add('active');
                isValid = false;
            } else {
                document.getElementById('horas-error').classList.remove('active');
            }
            
            if (dias <= 0 || dias > 31) {
                document.getElementById('dias-error').textContent = errorMessages[currentLang].dias;
                document.getElementById('dias-error').classList.add('active');
                isValid = false;
            } else {
                document.getElementById('dias-error').classList.remove('active');
            }
            
            if (salario <= 0) {
                document.getElementById('salario-error').textContent = errorMessages[currentLang].salario;
                document.getElementById('salario-error').classList.add('active');
                isValid = false;
            } else {
                document.getElementById('salario-error').classList.remove('active');
            }
            
            if (!isValid) return;
            
            const costoMensual = operarios * salario;
            const ahorroMensual = costoMensual * 0.7;
            const roiMeses = Math.ceil((operarios * 15000) / ahorroMensual);
            
            // Resultados traducidos
            const resultMessages = {
                es: {
                    ahorro: `Ahorro mensual estimado: $${ahorroMensual.toLocaleString()} MXN`,
                    roi: `ROI en aproximadamente: ${roiMeses} meses`,
                    recomendacion: `Recomendación: ${roiMeses <= 12 ? 'Alta prioridad - ROI rápido' : 'Evaluar caso específico'}`
                },
                en: {
                    ahorro: `Estimated monthly savings: $${ahorroMensual.toLocaleString()} MXN`,
                    roi: `ROI in approximately: ${roiMeses} months`,
                    recomendacion: `Recommendation: ${roiMeses <= 12 ? 'High priority - Fast ROI' : 'Evaluate specific case'}`
                }
            };
            
            document.getElementById('ahorro-mensual').textContent = resultMessages[currentLang].ahorro;
            document.getElementById('roi-periodo').textContent = resultMessages[currentLang].roi;
            document.getElementById('recomendacion').textContent = resultMessages[currentLang].recomendacion;
            
            document.getElementById('roi-result').style.display = 'block';
        }

        // ============================================
        // FUNCIONES DE ACTUALIZACIÓN DEL CARRITO
        // ============================================
        function updateCartDisplay() {
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            const cartCount = document.querySelector('.cart-count');
            
            const cart = CartModule.getCart();
            const total = CartModule.getTotal();
            const count = CartModule.getCount();
            
            if (cartItems) {
                cartItems.innerHTML = '';
                
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div class="cart-item-image">
                            <img src="${item.image}" alt="${item.service}" loading="lazy">
                        </div>
                        <div class="cart-item-info">
                            <h4>${item.service}</h4>
                            <div class="cart-item-price">$${item.price} MXN/hora x ${item.quantity}</div>
                        </div>
                        <div class="cart-item-actions">
                            <button class="remove-item" data-index="${index}" aria-label="Eliminar ${item.service}">&times;</button>
                        </div>
                    `;
                    cartItems.appendChild(cartItem);
                });
            }
            
            if (cartTotal) cartTotal.textContent = `$${total} MXN`;
            if (cartCount) cartCount.textContent = count;
            
            // Actualizar textos traducidos del carrito
            const cartTitle = document.getElementById('cart-title');
            const cartTotalLabel = document.getElementById('cart-total-label');
            
            if (cartTitle) {
                cartTitle.textContent = TranslationSystem.translate('cart');
            }
            if (cartTotalLabel) {
                cartTotalLabel.textContent = TranslationSystem.translate('total');
            }
            
            // Agregar event listeners a los botones de eliminar
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = parseInt(e.target.getAttribute('data-index'));
                    CartModule.removeItem(index);
                });
            });
        }

        // ============================================
        // FUNCIONES EXISTENTES
        // ============================================
        function preloadImages() {
            const imageUrls = [
                'https://images.unsplash.com/photo-1485827404703-89b55fcc595e?auto=format&fit=crop&w=1350',
                'https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1350',
                'https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=1350',
                'https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=1350',
                'https://images.unsplash.com/photo-1652145595413-0a79398e5888?w=500&auto=format&fit=crop&q=60'
            ];
            
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        }
        
        function initLazyLoading() {
            const images = document.querySelectorAll('.service-img img');
            
            function loadImage(img) {
                const src = img.getAttribute('src');
                const parent = img.parentElement;
                
                if (img.complete && img.naturalHeight !== 0) {
                    img.classList.add('loaded');
                    parent.classList.add('loaded');
                    return;
                }
                
                const imageLoader = new Image();
                imageLoader.src = src;
                
                imageLoader.onload = function() {
                    img.classList.add('loaded');
                    parent.classList.add('loaded');
                };
            }
            
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        loadImage(img);
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '50px',
                threshold: 0.1
            });
            
            images.forEach(img => {
                img.loading = 'lazy';
                img.decoding = 'async';
                imageObserver.observe(img);
            });
        }
        
        function optimizeCartImages() {
            const cartImages = document.querySelectorAll('.cart-item-image img');
            
            cartImages.forEach(img => {
                img.loading = 'lazy';
            });
        }

        // ============================================
        // INICIALIZACIÓN COMPLETA
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar sistema de traducción
            TranslationSystem.init();
            
            // Inicializar sistema de acceso secreto
            SecretAccessSystem.init();
            SecretAccessSystem.checkAdminSession();
            
            // Inicializar sistema de cotizaciones
            QuotationControlSystem.init();
            
            // Inicializar sistema de chatbot
            ChatbotSystem.init();
            
            // Cargar carrito
            CartModule.loadCart();
            CartModule.addListener(updateCartDisplay);
            updateCartDisplay();
            
            // Panel de administración
            document.getElementById('admin-panel').addEventListener('click', () => {
                QuotationControlSystem.showAdminPanel();
            });
            
            // Hacer updateSubmenus disponible globalmente
            window.updateSubmenus = TranslationSystem.updateSubmenus;
            
            // Configurar chatbot
            const chatbotToggle = document.getElementById('chatbot-toggle');
            const closeChatbot = document.getElementById('close-chatbot');
            const openChatbotBtn = document.getElementById('open-chatbot');
            const closeChatbotPanelBtn = document.getElementById('close-chatbot-panel-btn');
            const chatbotPanel = document.getElementById('chatbot-panel');
            
            // Mostrar panel informativo del chatbot después de 5 segundos
            setTimeout(() => {
                if (chatbotPanel && !localStorage.getItem('chatbot_panel_shown')) {
                    chatbotPanel.classList.add('active');
                    localStorage.setItem('chatbot_panel_shown', 'true');
                }
            }, 5000);
            
            // Botón para abrir chatbot desde el panel
            if (openChatbotBtn) {
                openChatbotBtn.addEventListener('click', () => {
                    chatbotPanel.classList.remove('active');
                    ChatbotSystem.openChatbot();
                });
            }
            
            // Botón para cerrar panel del chatbot
            if (closeChatbotPanelBtn) {
                closeChatbotPanelBtn.addEventListener('click', () => {
                    chatbotPanel.classList.remove('active');
                });
            }
            
            // Botón flotante del chatbot
            if (chatbotToggle) {
                chatbotToggle.addEventListener('click', ChatbotSystem.openChatbot);
            }
            
            // Botón para cerrar chatbot
            if (closeChatbot) {
                closeChatbot.addEventListener('click', ChatbotSystem.closeChatbot);
            }
            
            // Sincronizar idioma del chatbot con el sistema principal
            TranslationSystem.addLanguageChangeListener((lang) => {
                ChatbotSystem.setLanguage(lang);
            });
            
            // Preload de imágenes
            preloadImages();
            
            // Inicializar eslogan
            setInterval(() => {
                const spanishSlogan = document.querySelector('.slogan.es');
                const englishSlogan = document.querySelector('.slogan.en');
                if (spanishSlogan && englishSlogan) {
                    spanishSlogan.classList.toggle('active');
                    englishSlogan.classList.toggle('active');
                }
            }, 5000);
            
            // Inicializar lazy loading
            setTimeout(() => {
                initLazyLoading();
            }, 100);
            
            // Event listeners existentes
            // Scroll suave
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
            
            // Carrito functionality
            const cartToggle = document.getElementById('cart-toggle');
            const closeCart = document.getElementById('close-cart');
            const cartModal = document.getElementById('cart-modal');
            const overlay = document.getElementById('overlay');
            const generateQuotationBtn = document.getElementById('generate-quotation-btn');
            const scheduleBtn = document.getElementById('schedule-btn');
            const addToCartButtons = document.querySelectorAll('.add-to-cart');

            if (cartToggle && cartModal && overlay) {
                cartToggle.addEventListener('click', () => {
                    cartModal.style.display = 'block';
                    overlay.style.display = 'block';
                    document.body.classList.add('panel-open');
                    optimizeCartImages();
                });

                closeCart.addEventListener('click', () => {
                    cartModal.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.classList.remove('panel-open');
                });

                overlay.addEventListener('click', () => {
                    cartModal.style.display = 'none';
                    overlay.style.display = 'none';
                    document.body.classList.remove('panel-open');
                });
            }

            if (addToCartButtons) {
                addToCartButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const service = button.getAttribute('data-service');
                        const price = parseInt(button.getAttribute('data-price'));
                        const image = button.getAttribute('data-image');
                        
                        CartModule.addItem({ service, price, image });
                        
                        alert(`${service} agregado al carrito!`);
                    });
                });
            }

            // Generar cotización desde el carrito
            if (generateQuotationBtn) {
                generateQuotationBtn.addEventListener('click', generateQuotationFromCart);
            }

            if (scheduleBtn) {
                scheduleBtn.addEventListener('click', () => {
                    const cart = CartModule.getCart();
                    if (cart.length === 0) {
                        alert('Agrega servicios a tu carrito antes de agendar una cita');
                        return;
                    }
                    
                    const servicesList = cart.map(item => `${item.service} (${item.quantity} horas)`).join(', ');
                    const title = `Consulta Mitronixs - ${servicesList}`;
                    const details = `Servicios solicitados: ${servicesList}. Para más información, contactar a Mitronixs.`;
                    
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    tomorrow.setHours(10, 0, 0, 0);
                    
                    const startTime = tomorrow.toISOString().replace(/-|:|\.\d+/g, '');
                    const endTime = new Date(tomorrow.getTime() + 60 * 60 * 1000).toISOString().replace(/-|:|\.\d+/g, '');
                    
                    const calendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&details=${encodeURIComponent(details)}&dates=${startTime}/${endTime}`;
                    
                    window.open(calendarUrl, '_blank');
                    
                    alert('Se abrirá Google Calendar para que puedas agendar tu cita. ¡Te esperamos!');
                });
            }

            // Formulario de contacto
            const contactForm = document.getElementById('contactForm');
            
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const name = document.getElementById('name').value.trim();
                    const email = document.getElementById('email').value.trim();
                    const phone = document.getElementById('phone').value.trim();
                    const message = document.getElementById('message').value.trim();
                    
                    let isValid = true;
                    
                    // Validar nombre
                    if (!name || name.length < 2) {
                        document.getElementById('name-error').textContent = 'El nombre debe tener al menos 2 caracteres';
                        document.getElementById('name-error').classList.add('active');
                        isValid = false;
                    } else {
                        document.getElementById('name-error').classList.remove('active');
                    }
                    
                    // Validar email
                    if (!isValidEmail(email)) {
                        document.getElementById('email-error').textContent = 'Ingresa un email válido';
                        document.getElementById('email-error').classList.add('active');
                        isValid = false;
                    } else {
                        document.getElementById('email-error').classList.remove('active');
                    }
                    
                    // Validar teléfono
                    if (phone && !isValidMexicanPhone(phone)) {
                        document.getElementById('phone-error').textContent = 'Ingresa un teléfono mexicano válido';
                        document.getElementById('phone-error').classList.add('active');
                        isValid = false;
                    } else {
                        document.getElementById('phone-error').classList.remove('active');
                    }
                    
                    // Validar mensaje
                    if (!message || message.length < 10) {
                        document.getElementById('message-error').textContent = 'El mensaje debe tener al menos 10 caracteres';
                        document.getElementById('message-error').classList.add('active');
                        isValid = false;
                    } else {
                        document.getElementById('message-error').classList.remove('active');
                    }
                    
                    if (!isValid) return;
                    
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    submitBtn.textContent = 'Enviando...';
                    submitBtn.disabled = true;
                    submitBtn.classList.add('loading');
                    
                    setTimeout(() => {
                        alert('¡Gracias por tu mensaje! Nos pondremos en contacto contigo pronto.');
                        this.reset();
                        submitBtn.textContent = originalText;
                        submitBtn.disabled = false;
                        submitBtn.classList.remove('loading');
                    }, 2000);
                });
            }
            
            // Mostrar/ocultar calculadora ROI
            const calculatorHeroToggle = document.getElementById('calculator-hero-toggle');
            const calculatorAboutToggle = document.getElementById('calculator-about-toggle');
            const roiCalculator = document.getElementById('roi-calculator');
            
            if (calculatorHeroToggle && roiCalculator) {
                calculatorHeroToggle.addEventListener('click', () => {
                    roiCalculator.style.display = roiCalculator.style.display === 'block' ? 'none' : 'block';
                });
            }
            
            if (calculatorAboutToggle && roiCalculator) {
                calculatorAboutToggle.addEventListener('click', () => {
                    roiCalculator.style.display = roiCalculator.style.display === 'block' ? 'none' : 'block';
                    roiCalculator.scrollIntoView({ behavior: 'smooth' });
                });
            }
            
            console.log('✅ Sistema Mitronixs completamente inicializado');
            console.log('✅ Chatbot activado y listo para usar');
            console.log('✅ Diagnosticador de fallas funcionando correctamente');
            console.log('✅ Sistema de acceso secreto activado (Rimisa01.)');
            console.log('✅ Sistema de traducción completo activado para el Diagnosticador');
        });
    </script>
</body>

</html>
